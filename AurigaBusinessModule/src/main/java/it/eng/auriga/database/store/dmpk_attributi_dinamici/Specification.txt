1        PACKAGE DMPK_ATTRIBUTI_DINAMICI AUTHID CURRENT_USER IS
2        
3        	/****************************************************		INFORMAZIONI GENERALI		*******************************************************/
4        	/************** Argomenti delle stored per il controllo della transazione:											*******/
5        	/************** FlgRollBckFullIn -> se 1 in caso di errore viene fatta la rollback completa (non a savepoint), 					*******/
6        	/************** 				altrimenti la rollback delle sole modifiche effettuate nella stored						*******/
7        	/************** 				ATTENZIONE: la rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log			*******/
8        	/************** FlgAutoCommitIn  -> se vale 1, dopo la rollback e qualunque sia l'esito (positivo o no), la stored esegue una commit finale *****/
9        	/************** Tutte le funzioni/procedure che NON hanno gli argomenti in input FlgRollBckFullIn e FlgAutoCommitIn 				*******/
10        	/************** NON ESEGUONO AL LORO INTERNO ALCUNA COMMIT nè ROLLBACK 												*******/
11        
12        	/************** Tutte le funzioni, tranne quelle da utilizzarsi nelle select, restituiscono 1 in caso di successo, altrimenti 0		*******/
13        	/************** Tali funzioni restituiscono, in caso di result 0, un n.ro, un contesto e un messaggio di errore:					*******/
14        	/************** il n.ro è: <0 se errore ORACLE non specificamente gestito 											*******/
15        	/**************		   da 1->1000 errore "grave" (SEVERE_ERROR) gestito											*******/
16        	/**************		   >1000 errore non grave gestito														*******/
17        	/************** il contesto indica il package e/o funzione/procedura in cui si è verificato l'errore							*******/
18        
19        
20        	/**** Funzione per ricercare gli attributi dinamici definiti ****/
21        	FUNCTION TrovaAttributiDefiniti(
22        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
23        																	-- (obblig). Codice identificativo del token di connessione
24        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
25        			FlgPreimpostaFiltroIn		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1 i filtri e l'ordinamento vengono settati secondo le impostazioni dell'utente di lavoro, altrimenti restano come passati in input
26        			--------------- inizio filtri di ricerca-------------------
27        			NomeAttrIO				IN OUT	DMT_ATTRIBUTES_DEF.ATTR_NAME%type,		-- 1° filtro di ricerca: nome identificativo dell'attributo (ricerca case-insensitive in like)
28        			LabelAttrIO				IN OUT	DMT_ATTRIBUTES_DEF.ATTR_LABEL%type,		-- 2° filtro di ricerca: label con cui l'attributo appare nella GUI (ricerca case-insensitive in like)
29        			TipoAttrIO				IN OUT	DMT_ATTRIBUTES_DEF.ATTR_TYPE%type,		-- 3° filtro di ricerca: tipo di attributo. Valori possibili:
30        																	-- CHECK		= Casella di spunta
31        																	-- DATE		= Data (con o senza ora)
32        																	-- DATETIME		= Data e ora
33        																	-- NUMBER		= Numerico (inclusi importi in Euro)
34        																	-- EURO		= Importo in Euro
35        																	-- TEXT-BOX		= Alfanumerico su una riga
36        																	-- TEXT-AREA	= Alfanumerico su più righe
37        																	-- CKEDITOR		= Editor html
38        																	-- TEXT		= Alfanimerico su una o più righe
39        																	-- COMBO-BOX	= Lista di scelta
40        																	-- RADIO		= Radio group
41        																	-- COMPLEX		= Strutturato, ovvero composto da sotto-attributi
42        																	-- SEMPLICE		= Qualsisai tipo tranne COMPLEX
43        																	-- CASELLA_TESTO  = Uno dei tipi DATE, DATETIME, NUMBER, EURO, TEXT-BOX
44        			DesAttrIO				IN OUT	DMT_ATTRIBUTES_DEF.ATTR_DESCRIPTION%type, -- 4° filtro di ricerca: descrizione dell'attributo (ricerca case-insensitive in like)
45        			FlgInclAnnullatiIO		IN OUT	INTEGER,						-- (valori 1/0/NULL) 5° filtro di ricerca: se 1 vengono estratti anche gli attributi logicamente annullati, altrimenti no
46        			FlgEscludiSottoAttrIO		IN OUT	INTEGER,						-- (valori 1/0/NULL) 6° filtro di ricerca: se 1 gli attributi che appartengono ad un complesso non vengono estratti, altrimenti sì
47        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
48        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare solo per le colonne da 1 a 6). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
49        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
50        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
51        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
52        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.
53        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
54        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
55           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)
56        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro
57        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
58        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
59        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
60             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
61        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
62        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista degli attributi trovati (XML conforme a schema LISTA_STD.xsd)
63        																	-- Ogni attributo è un tag Riga che contiene le seguenti colonne:
64        																	-- 1:  Identificativo (ROWID) del record che definisce l'attributo
65        																	-- 2:  Nome identificativo dell'attributo
66        																	-- 3:  Descrizione dell'attributo
67        																	-- 4:  Label con cui l'attributo viene mostrato nella GUI
68        																	-- 5:  Tipo dell'attributo (decodificato)
69        																	-- 6:  Label con cui l'attributo viene mostrato nella GUI preceduta dalla label con cui l'eventuale attributo di appartenenza viene mostrato nella GUI, se sotto-attributo, seguita dalle label degli attributi componenti, se attributo complesso
70        																	-- 7:  Nome identificativo dell'eventuale attributo di appartenenza
71        																	-- 8: (valori 1/0) Se 1 si tratta di un attributo già utilizzato e dunque con caratteristiche non modificabili tranne: label, descrizione, valore di default, caratteristiche di presentation (larghezza e altezza) e limitazioni di accesso
72        																	-- 9: (valori 1/0) Se 1 si tratta di un attributo annullato
73        																	-- 10: Timestamp di creazione dell'attributo(nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
74        																	-- 11: Descrizione dell'utente di creazione dell'attributo
75        																	-- 12: Timestamp di ultima modifica dei dati dell'attributo(nel formato dato dal parametro di conf. FMT_STD_TIMESTAMP)
76        																	-- 13: Descrizione dell'utente di ultima modifica dei dati dell'attributo
77        																	-- 14: (valori 1/0) Flag di attributo da riversare nelle parole chiave per essere indicizzato
78        																	-- 15: (valori 1/0) Flag di attributo con valori univoci
79        																	-- 16: (valori 1/0) Flag di attributo con dati sensibili
80        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            	-- (valori 1/0) Se 1 si ha abilitazione a creazione di nuovi attributi
81        			FlgAbilUpdOut 			OUT 		PLS_INTEGER ,            	-- (valori 1/0) Se 1 si ha abilitazione a modifica di attributi
82        			FlgAbilDelOut 			OUT 		PLS_INTEGER,            	-- (valori 1/0) Se 1 si ha abilitazione a cancellazione di attributi
83        			FlgMostraACLOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indica se l'ACL è gestibile o meno per gli attributi e dunque se va mostrata nella GUI
84        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
85        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
86        			ErrMsgOut				OUT 		VARCHAR2,					-- Messaggio d'errore
87        			NomeAttrSupIn			IN 		DMT_ATTRIBUTES_DEF.ATTR_NAME_SUP%type DEFAULT NULL,
88        																			-- filtro di ricerca: nome identificativo dell'attributo di appartenenza (ricerca case-insensitive in like)
89        			IdModelloNotIn			IN		DMT_MODELLI_DOC.ID_MODELLO%type DEFAULT NULL,
90        																			-- Filtro di ricerca: id_modello di un modello compilabile on-line ai cui input/tabelle NON devono già essere associati gli attributi da ricercare
91        			NomeAttrToForceIn		IN		DMT_ATTRIBUTES_DEF.ATTR_NAME%type DEFAULT NULL
92        																			-- Nome di un attributo da mettere comunque nel result set restituito anche se non matcha tutti i filtri di ricerca
93        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
94        
95        	/**** Funzione per estrarre il ROWID di un attributo dinamico ****/
96        	FUNCTION GetAttrRowId(
97        			CodIdConnectionTokenIn	IN	    DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,	-- (obblig). Codice identificativo del token di connessione
98        			NomeAttrIO				IN OUT	DMT_ATTRIBUTES_DEF.ATTR_NAME%type,		-- nome identificativo dell'attributo (ricerca case-insensitive in like)
99        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
100        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
101        			ErrMsgOut				OUT 	VARCHAR2)					-- Messaggio d'errore
102        			return VARCHAR2;	--restituisce il rowid dell'attributo altrimenti null
103        
104        	/***** Funzione per ottenere tutti i dati di dettaglio di un attributo dinamico definito *****/
105        	function LoadDettAttributo(
106        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
107        																	-- (obblig). Codice identificativo del token di connessione
108        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
109        			NomeIO				IN OUT	DMT_ATTRIBUTES_DEF.ATTR_NAME%type,		-- (obblig.) Nome identificativo dell'attributo
110        			LabelOut				OUT		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type,		-- Label con cui l'attributo appare nella GUI
111        			TipoOut				OUT		DMT_ATTRIBUTES_DEF.ATTR_TYPE%type,		-- Tipo di attributo. Valori possibili:
112        																	-- CHECK		= Casella di spunta
113        																	-- DATE		= Data (senza ora)
114        																	-- DATETIME		= Data e ora
115        																	-- NUMBER		= Numerico
116        																	-- EURO		= Importo in Euro
117        																	-- TEXT-BOX		= Testo mono-riga
118        																	-- TEXT-AREA	= Area di testo
119        																	-- CKEDITOR		= Editor html
120        																	-- COMBO-BOX	= Lista di scelta
121        																	-- RADIO		= Radio group
122        																	-- COMPLEX		= Strutturato, ovvero composto da sotto-attributi
123        			DescrizioneOut			OUT		DMT_ATTRIBUTES_DEF.ATTR_DESCRIPTION%type, -- Descrizione dell'attributo
124        			NomeAttrAppOut			OUT		DMT_ATTRIBUTES_DEF.ATTR_NAME%type,		-- Nome identificativo dell'eventuale attributo di appartenenza
125        			LabelAttrAppOut			OUT		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type,		-- Label con cui l'eventuale attributo di appartenenza viene mostrato nella GUI
126        			NroOrdInAttrAppOut		OUT		DMT_ATTRIBUTES_DEF.NRO_ORD_IN_SUP%type,	-- N.ro che indica la posizione dell'attributo tra i vari sotto-attributi che compongono l'eventuale attributo di appartenenza
127        			NroRigaInAttrAppOut		OUT			DMT_ATTRIBUTES_DEF.NRO_RIGA_IN_SUP%type,	-- N.ro (da 1 in su) che indica la riga che occupa l'attributo nel riquadro corrispondente all'eventuale attributo di appartenenza
128        			FlgObbligInAttrAppOut		OUT		DMT_ATTRIBUTES_DEF.FLG_OBBLIG_IN_SUP%type,-- (valori 1/0) 1 indica che è un sotto-attributo obbligatorio dell'attributo di appartenenza
129        			NroCifreCaratteriOut		OUT		DMT_ATTRIBUTES_DEF.ATTR_SIZE%type,		-- N.ro di caratteri se attributo alfanumerico o di cifre se numerico
130        			PrecisioneDecimaleOut		OUT		DMT_ATTRIBUTES_DEF.ATTR_SCALE%type,		-- N.ro di cifre decimali (se attributo numerico)
131        			FormatoNumericoOut		OUT		DMT_ATTRIBUTES_DEF.ATTR_FORMAT%type,	-- Formato di presentazione dell'attributo se numerico (un formato numerico Oracle)
132        			ValoreMinOut			OUT		VARCHAR2,						-- Valore minimo consentito (se attributo numerico o data/timestamp) (se è un attributo data/timestamp è espresso in formato dato dal parametro di config. FMT_STD_DATA/FMT_STD_TIMESTAMP)
133        			ValoreMaxOut			OUT		VARCHAR2,						-- Valore massimo consentito (se attributo numerico o data/timestamp) (se è un attributo data/timestamp è espresso in formato dato dal parametro di config. FMT_STD_DATA/FMT_STD_TIMESTAMP)
134        			RestrizioniSulCaseOut		OUT		DMT_ATTRIBUTES_DEF.CASE_RESTRICTION%type,	-- Restrizioni sul case (se attributo alfanumerico). Valori possibili:
135        																	-- UPPER	=	Tutto maiuscolo
136        																	-- LOWER	=	Tutto minuscolo
137        			LarghGUIOut				OUT		DMT_ATTRIBUTES_DEF.ATTR_WIDTH%type,		-- Larghezza (size) con cui mostrare nelle GUI il campo corrispondente all''attributo
138        			AltezzaGuiOut			OUT		DMT_ATTRIBUTES_DEF.ATTR_HEIGTH%type,	-- Altezza (n.ro righe) con cui mostrare nelle GUI il campo corrispondente all''attributo (valorizzato solo se il tipo è TEXT-AREA o CKEDITOR)
139        			ValoreDefaultOut			OUT		DMT_ATTRIBUTES_DEF.ATTR_DEF_VALUE%TYPE,	--   Valore di default
140        			QueryPerValoriPossibiliOut	OUT		DMT_ATTRIBUTES_DEF.ATTR_LIST_QUERY%type,	-- Query per estrarre la lista dei valori possibili per l'attributo se di tipo "lista di scelta" (query con un unica selected column)
141        			URLWSValoriPossibiliOut	OUT			DMT_ATTRIBUTES_DEF.WSDL_URL%type,				-- End-point del web-service per estrarre la lista dei valori possibili per l'attributo
142        			XMLInWSValoriPossibiliOut OUT		NOCOPY CLOB,							-- XML di input da passare al web-service per estrarre la lista dei valori possibili per l'attributo
143        			FlgDaIndicizzareOut		OUT		DMT_ATTRIBUTES_DEF.FLG_DA_INDICIZZARE%type,-- (valori 1/0) 1 indica che è un attributo da riversare nelle parole chiave per essere indicizzato
144        			FlgProtectedOut			OUT		DMT_ATTRIBUTES_DEF.FLG_PROTECTED%type,		-- (valori 1/0/NUL) 1 indica che è un attributo contenente dati sensibili
145        			FlgValoriUnivociOut		OUT		DMT_ATTRIBUTES_DEF.FLG_VALORI_UNIVOCI%type,	-- (valori 1/0/NUL) 1 indica che è un attributo i cui valori devono essere univoci (ovvero più entità non possono assumere gli stessi valori). Può essere 1 anche nel caso di attributi complessi, nel qual caso è univica l'ennupla dei valori dei sotto-attributi
146        			RegularExprOut			OUT		DMT_ATTRIBUTES_DEF.REGULAR_EXPR%type,	-- Espressione regolare con cui validare il contenuto dell'attributo se TEXT_BOX o TEXT_AREA
147        			XMLValoriPossibiliOut		OUT		NOCOPY CLOB,					-- Lista con i valori possibili per l'attributo se di tipo "lista di scelta" (XML conforme a schema LISTA_STD.xsd)
148        																	-- Ogni valore possibile è un tag "Riga" che contiene le seguenti colonne:
149        																	-- 1: Valore possibile
150        			XMLACLOut				OUT		NOCOPY CLOB,					-- ACL che limita l'accesso all'attributo (XML conforme a schema LISTA_STD.xsd)
151        																	-- Ogni ACE è un tag "Riga" che che contiene le seguenti colonne:
152        																	-- 1: Flag che indica il tipo di soggetto a cui sono assentiti/negati permessi. Valori:
153        																		-- 	SP	= Soggetto produttore
154        																		-- 	AOO	= AOO
155        																		-- 	UT 	= Utente
156        																		--	SV	= Scrivania virtuale (vale a dire la scrivania che un utente occupa nello svolgimento di un dato ruolo nella struttura organizzativa)
157        																		--	UO	= Unità organizzativa (vale a dire tutte le scrivanie virtuali ad essa afferenti)
158        																		--	G	= Gruppo (di utenti, UO, scrivanie)
159        																		--	R	= Ruolo amministrativo contestualizzato ovvero i soggetti che hanno un certo ruolo amministrativo (eventualmente rispetto ad una certa UO o un dato livello della struttura organizzativa o entrambi)
160        																	-- 2: Id. del soggetto nell'anagrafe di origine (se SP o AOO è l'ID_SP_AOO, se UT l'ID_USER, se SV l'ID_SCRIVANIA, se UO l'ID_UO, se G l'ID_GRUPPO, se R l'ID_RUOLO_AMM, se RP il RUOLO_SOGG_IN_PROC)
161        																	-- 3: Denominazione/nome del destinatario del permesso
162        																	-- 4: Identificativo della UO cui appartiene la scrivania destinataria del permesso
163        																	-- 5: Nri livello della UO destinataria del permesso o a cui appartiene la scrivania destinataria (sono specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
164        																	-- 6: Denominazione della UO cui appartiene la scrivania destinataria del permesso
165        																	-- 7: Codice che identifica nell'applicazione esterna da cui ci si connette l'utente destinatario del permesso o quello che occupa la scrivania destinataria del permesso
166        																	-- 8: Denominazione dell'utente che occupa la scrivania destinataria del permesso
167        																	-- 9: (valore 1) Indica che il destinatario del permesso, se UO, sono anche tutte le sue sotto-UO
168        																	-- 10: (valori interi da 1 a n) Livello della struttura organizzativa in cui si espleta il ruolo amministrativo destinatario del permesso
169        																	-- 11: Se colonna 1 =R: Codice del tipo di unità organizzativa in cui si espleta il ruolo amministrativo destinatario del permesso (alternativo alla colonna 10)
170        																	-- 	Se colonna 1 =UT o SV: Username (delle credenziali locali) dell'utente destinatario del permesso o che occupa la scrivania destinataria del permesso
171        																	-- 12: Se colonna 1 =R: Descrizione del tipo di unità organizzativa (es: settore, servizio, ecc) in cui si espleta il ruolo amministrativo destinatario del permesso (alternativo alla colonna 10)
172        																	--	Se colonna 1 =UT o SV: N.ro di matricola dell'utente destinatario del permesso o che occupa la scrivania destinataria del permesso
173        																	-- 13: Identificativo della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso
174        																	-- 14: Denominazione/nome della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
175        																	-- 15: Nri livello della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
176        																	-- 16:(valore 1) Indica che il ruolo amministrativo destinatario del permesso si espleta anche nelle sotto-UO della/e UO rintracciate tramite i valori delle 3 colonne precedenti
177        																	-- 17: Flag di visibilità dell'attributo. Valori:
178        																		-- 1: Consentita
179        																		-- 0: Negata
180        																		-- NUL = Nulla di specificato
181        																	-- 18: Flag di modificabilità dell'attributo. Valori:
182        																		-- 1: Consentita
183        																		-- 0: Negata
184        																		-- NUL = Nulla di specificato
185        																	-- 29: Dati identificativi del soggetto
186        			NomeIdLookupOut			OUT		DMT_ATTRIBUTES_DEF.LISTA_LOOKUP%type,	-- Nome identificativo della lista che fa da lookup (lista di scelta) per l'attributo
187        			DesLookupOut			OUT		VARCHAR2,						-- Descrizione della lista che fa da lookup (lista di scelta) per l'attributo
188        			NroColLookupOut			OUT		DMT_ATTRIBUTES_DEF.NRO_COL_LOOKUP%type,	-- N.ro della colonna del clob di popolamento della lista di scelta (lookup) che contiene il valore da riportare nell'attributo
189        			DesColLookupOut			OUT		VARCHAR2,						-- Descrizione del contenuto della colonna del clob di popolamento della lista di scelta (lookup) che contiene il valore da riportare nell'attributo
190        			FiltroInLookupOut			OUT		DMT_ATTRIBUTES_DEF.FILTRO_IN_LOOKUP%type,	-- Nome identificativo del campo di filtro della lista di scelta (lookup) che va popolato con il valore dell'attributo
191        			FlgSoloValDaLookupOut		OUT		PLS_INTEGER,					-- (valori 1/0/NULL) Se 1 significa che i valori possibili per l'attributo sono solo quelli presi dalla lookup indicata
192        			RowidOut				OUT		VARCHAR2,						-- Rowid del record dell'attributo
193        			FlgUtilizzatoOut			OUT		PLS_INTEGER,					-- (valori 1/0)  Se 1 si tratta di un attributo già utilizzato e dunque con caratteristiche non modificabili tranne: label, descrizione, valore di default, caratteristiche di presentation (larghezza e altezza) e limitazioni di accesso
194        			BachSizeOut				OUT		PLS_INTEGER,					-- Indica il massimo n.ro di record per ogni pagina da mostrare nelle liste restituite in output
195        			FlgMostraACLOut			OUT		PLS_INTEGER,					-- (valori 1/0) Indica se l'ACL è gestibile o meno per gli attributi e dunque se va mostrata nella GUI
196        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
197        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
198        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
199        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
200        
201        
202        	/***** funzione per creare o modificare un attributo dinamico ******/
203        	function IUAttributo(
204        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
205        																	-- (obblig). Codice identificativo del token di connessione
206        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
207        			RowidIO				IN OUT	VARCHAR2,						-- Rowid del record-attributo da modificare. Se non valorizzato l'attributo è da inserire ex-novo
208        																	-- In output, salvo in caso di errore, è sempre valorizzato
209        			NomeIn				IN 		DMT_ATTRIBUTES_DEF.ATTR_NAME%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
210        																	-- (obblig.) Nome identificativo dell'attributo da creare o modificare
211        			LabelIn				IN		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
212        																	-- (obblig.) Label con cui l'attributo appare nella GUI
213        			TipoIn				IN		DMT_ATTRIBUTES_DEF.ATTR_TYPE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
214        																	-- (obblig.) Tipo di attributo. Valori possibili:
215        																	-- CHECK		= Casella di spunta
216        																	-- DATE		= Data (senza ora)
217        																	-- DATETIME		= Data e ora
218        																	-- NUMBER		= Numerico
219        																	-- EURO		= Importo in Euro
220        																	-- TEXT-BOX		= Testo mono-riga
221        																	-- TEXT-AREA	= Area di testo
222        																	-- CKEDITOR		= Editor html
223        																	-- COMBO-BOX	= Lista di scelta
224        																	-- RADIO		= Radio group
225        																	-- COMPLEX		= Strutturato, ovvero composto da sotto-attributi
226        			DescrizioneIn			IN		DMT_ATTRIBUTES_DEF.ATTR_DESCRIPTION%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
227        																	 -- Descrizione dell'attributo
228        			NomeAttrAppIn			IN		DMT_ATTRIBUTES_DEF.ATTR_NAME%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
229        																	-- Nome identificativo dell'eventuale attributo di appartenenza.
230        			LabelAttrAppIn			IN		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
231        																	-- Label con cui l'eventuale attributo di appartenenza viene mostrato nella GUI
232        			NroOrdInAttrAppIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
233        																	-- N.ro che indica la posizione dell'attributo tra i vari sotto-attributi che compongono l'eventuale attributo di appartenenza
234        																	-- Viene considerato e gestito solo se è valorizzato uno dei 2 argomenti precedenti
235        			NroRigaInAttrAppIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
236        																	-- N.ro (da 1 in su) che indica la riga che occupa l'attributo nel riquadro corrispondente all'eventuale attributo di appartenenza
237        																	-- Viene considerato e gestito solo se è valorizzato uno dei 2 argomenti NomeAttrAppIn e LabelAttrAppIn
238        			FlgObbligInAttrAppIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
239        																	-- (valori 1/0/NUL) 1 indica che è un sotto-attributo obbligatorio dell'attributo di appartenenza
240        			NroCifreCaratteriIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
241        																	-- N.ro di caratteri se attributo alfanumerico o di cifre (decimali inclusi) se numerico
242        																	-- Viene considerato e gestito solo se è il tipo è: NUMBER, EURO, TEXT-BOX, TEXT-AREA
243        			PrecisioneDecimaleIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
244        																	-- N.ro di cifre decimali (se attributo numerico)
245        																	-- Viene considerato e gestito solo se è il tipo è: NUMBER
246        			FormatoNumericoIn			IN		DMT_ATTRIBUTES_DEF.ATTR_FORMAT%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
247        																	-- Formato di presentazione dell'attributo se numerico (un formato numerico Oracle)
248        																	-- Viene considerato e gestito solo se è il tipo è: NUMBER
249        			ValoreMinIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
250        																	-- Valore minimo consentito (se attributo numerico o data/timestamp) (se è un attributo data/timestamp va espresso in formato dato dal parametro di config. FMT_STD_DATA/FMT_STD_TIMESTAMP)
251        																	-- Viene considerato e gestito solo se è il tipo è: NUMBER, EURO, DATE, DATETIME
252        			ValoreMaxIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
253        																	-- Valore massimo consentito (se attributo numerico o data/timestamp) (se è un attributo data/timestamp va espresso in formato dato dal parametro di config. FMT_STD_DATA/FMT_STD_TIMESTAMP)
254        																	-- Viene considerato e gestito solo se è il tipo è: NUMBER, EURO, DATE, DATETIME
255        			RestrizioniSulCaseIn		IN		DMT_ATTRIBUTES_DEF.CASE_RESTRICTION%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
256        																	-- Restrizioni sul case (se attributo alfanumerico). Valori possibili:
257        																	-- UPPER	=	Tutto maiuscolo
258        																	-- LOWER	=	Tutto minuscolo
259        																	-- Viene considerato e gestito solo se è il tipo è:TEXT-BOX, TEXT-AREA
260        			LarghGUIIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
261        																	-- Larghezza (size) con cui mostrare nelle GUI il campo corrispondente all''attributo
262        																	-- Viene considerato e gestito solo se il tipo è: NUMBER, TEXT-BOX, TEXT-AREA, EURO, CKEDITOR
263        			AltezzaGuiIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
264        																	-- Altezza (n.ro righe) con cui mostrare nelle GUI il campo corrispondente all''attributo
265        																	-- Viene considerato e gestito solo se il tipo è: TEXT-AREA, CKEDITOR
266        			ValoreDefaultIn			IN		DMT_ATTRIBUTES_DEF.ATTR_DEF_VALUE%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
267        																	-- Valore di default (se attributo di tipo DATE va espresso in formato pari al parametro di config. FMT_STD_DATA, se il tipo è DATETIME in formato pari al parametro di config. FMT_STD_TIMESTAMP, se è un numero il separatore dei decimali da usare è la ",", quello delle migliaia il .)
268        			QueryPerValoriPossibiliIn	IN		DMT_ATTRIBUTES_DEF.ATTR_LIST_QUERY%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
269        																	-- Query per estrarre la lista dei valori possibili per l'attributo (query con un unica selected column)
270        																	-- Viene considerato e gestito solo se il tipo è: COMBO_BOX o TEXT-BOX
271        			URLWSValoriPossibiliIn	IN		DMT_ATTRIBUTES_DEF.WSDL_URL%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
272        																	-- End-point del web-service per estrarre la lista dei valori possibili per l'attributo
273        																	-- Viene considerato e gestito solo se il tipo è: COMBO_BOX o TEXT-BOX
274        			XMLInWSValoriPossibiliIn IN		CLOB DEFAULT TO_CLOB(dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD')),
275        																	-- XML di input da passare al web-service per estrarre la lista dei valori possibili per l'attributo
276        																	-- Viene considerato e gestito solo se il tipo è: COMBO_BOX o TEXT-BOX
277        			FlgDaIndicizzareIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
278        																	-- (valori 1/0/NUL) 1 indica che è un attributo da riversare nelle parole chiave per indicizzarlo
279        			FlgProtectedIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
280        																	-- (valori 1/0/NUL) 1 indica che è un attributo contenente dati sensibili
281        			FlgValoriUnivociIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
282        																	-- (valori 1/0/NUL) 1 indica che è un attributo i cui valori devono essere univoci (ovvero più entità non possono assumere gli stessi valori). Può essere 1 anche nel caso di attributi complessi, nel qual caso è univica l'ennupla dei valori dei sotto-attributi
283        			RegularExprIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
284        																	-- Espressione regolare per validare il contenuto del campo se TEXT-BOX o TEXT_AREA
285        			FlgModValoriPossibiliIn		IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se i valori possibili per l'attributo che sono indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelle da inserire/modificare/cancellare) oppure completo (=C), vale a dire che dovranno soppiantare tutti quelli già specificati in caso di attributo da aggiornare
286        			XMLValoriPossibiliIn		IN		CLOB DEFAULT NULL,				-- Lista con i valori possibili per l'attributo se di tipo "lista di scelta" (XML conforme a schema LISTA_STD.xsd)
287        																	-- Ogni valore possibile è un tag "Riga" che contiene le seguenti colonne:
288        																	-- 1: Valore possibile
289        																	-- 2: (valori 1/0/NULL) Flag di record da eliminare
290        			FlgModACLIn				IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se le Access Control Entries (ACE) indicate nell'argomento successivo sono fornite in modo incrementale (=I) (solo quelle da aggiungere) oppure completo (=C), vale a dire che dovranno soppiantare tutte quelle già specificate
291        			XMLACLIn				IN		CLOB DEFAULT NULL,				-- ACL che limita l'accesso all'attributo (XML conforme a schema LISTA_STD.xsd)
292        																	-- Ogni ACE è un tag "Riga" che può contenere le seguenti colonne:
293        																		-- 1: Flag che indica il tipo di soggetto a cui sono assentiti/negati permessi. Valori:
294        																		-- 	SP	= Soggetto produttore
295        																		-- 	AOO	= AOO
296        																		-- 	UT 	= Utente
297        																		--	SV	= Scrivania virtuale (vale a dire la scrivania che un utente occupa nello svolgimento di un dato ruolo nella struttura organizzativa)
298        																		--	UO	= Unità organizzativa (vale a dire tutte le scrivanie virtuali ad essa afferenti)
299        																		--	G	= Gruppo (di utenti, UO, scrivanie)
300        																		--	R	= Ruolo amministrativo contestualizzato ovvero i soggetti che hanno un certo ruolo amministrativo (eventualmente rispetto ad una certa UO o un dato livello della struttura organizzativa o entrambi)
301        																	-- 2: Id. del soggetto nell'anagrafe di origine (se SP o AOO è l'ID_SP_AOO, se UT l'ID_USER, se SV l'ID_SCRIVANIA, se UO l'ID_UO, se G l'ID_GRUPPO, se R l'ID_RUOLO_AMM, se RP il RUOLO_SOGG_IN_PROC)
302        																	--	ATTENZIONE: Se non è congruente con le altre colonne che danno gli estremi del soggetto viene ignorato
303        																	-- 3: Denominazione/nome del destinatario del permesso (se trattasi di UO può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
304        																	-- 4: Identificativo della UO cui appartiene la scrivania destinataria del permesso
305        																	-- 5: Nri livello della UO destinataria del permesso o a cui appartiene la scrivania destinataria (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
306        																	-- 6: Denominazione della UO cui appartiene la scrivania destinataria del permesso (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
307        																	-- 7: Codice che identifica nell'applicazione esterna da cui ci si connette l'utente destinatario del permesso o quello che occupa la scrivania destinataria del permesso
308        																	-- 8: Denominazione dell'utente che occupa la scrivania destinataria del permesso
309        																	-- 9: (valore 1) Indica che il destinatario del permesso, se UO, sono anche tutte le sue sotto-UO
310        																	-- 10: (valori interi da 1 a n) Livello della struttura organizzativa in cui si espleta il ruolo amministrativo destinatario del permesso
311        																	-- 11: Se colonna 1 =R: Codice del tipo di unità organizzativa in cui si espleta il ruolo amministrativo destinatario del permesso (alternativo alla colonna 10)
312        																	-- 	Se colonna 1 =UT o SV: Username (delle credenziali locali) dell'utente destinatario del permesso o che occupa la scrivania destinataria del permesso
313        																	-- 12: Se colonna 1 =R: Descrizione del tipo di unità organizzativa (es: settore, servizio, ecc) in cui si espleta il ruolo amministrativo destinatario del permesso (alternativo alla colonna 10)
314        																	--	Se colonna 1 =UT o SV: N.ro di matricola dell'utente destinatario del permesso o che occupa la scrivania destinataria del permesso
315        																	-- 13: Identificativo della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso
316        																	-- 14: Denominazione/nome della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso (può essere la denominazione semplice o preceduta da quella di tutte le UO superiori separate da "|")
317        																	-- 15: Nri livello della UO in cui si espleta il ruolo amministrativo destinatario del permesso o dalla quale risalire alla/e UO del livello/tipo indicati in cui si espleta il ruolo amministrativo destinatario del permesso (tutti o alcuni; però se si specifica un livello è obbligatorio indicare tutti i livelli superiori; vanno specificati come appaiono nella GUI, ovvero romani se previsto, 0 o -- se nulli; sono separati dal separatore dei livelli valido per il soggetto produttore/AOO di appartenenza della UO)
318        																	-- 16:(valore 1) Indica che il ruolo amministrativo destinatario del permesso si espleta anche nelle sotto-UO della/e UO rintracciate tramite i valori delle 3 colonne precedenti
319        																	-- 17:(valori 1/0/NULL) Indica se la visualizzazione dell'attributo è assentita (1) o negata (0) o se nulla è specificato in merito (NULL)
320        																	-- 18: (valori 1/0/NULL) Indica se la modifica/cancellazione dell'attributo è assentita (1) o negata (0) o se nulla è specificato in merito (NULL)
321        			NomeIdLookupIn			IN		DMT_ATTRIBUTES_DEF.LISTA_LOOKUP%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
322        																	-- Nome identificativo della lista che fa da lookup (lista di scelta) per l'attributo
323        																	-- Viene considerato e gestito solo se è il tipo non è COMPLEX e COMBO_BOX
324        			NroColLookupIn			IN		DMT_ATTRIBUTES_DEF.NRO_COL_LOOKUP%type DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
325        																	-- N.ro della colonna del clob di popolamento della lista di scelta (lookup) che contiene il valore da riportare nell'attributo
326        																	-- Viene considerato e gestito solo se è il tipo non è COMPLEX e COMBO_BOX
327        			FiltroInLookupIn			IN		DMT_ATTRIBUTES_DEF.FILTRO_IN_LOOKUP%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
328        																	-- Nome identificativo del campo di filtro della lista di scelta (lookup) che va popolato con il valore dell'attributo
329        																	-- Viene considerato e gestito solo se è il tipo non è COMPLEX e COMBO_BOX
330        			FlgSoloValDaLookupIn		IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
331        																	-- (valori 1/0/NULL) Se 1 significa che i valori possibili per l'attributo sono solo quelli presi dalla lookup indicata
332        																	-- Viene considerato e gestito solo se è il tipo non è COMPLEX e COMBO_BOX
333        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
334        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
335        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
336        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
337        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
338        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
339        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
340        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
341        			FlgCallByGUIIn			IN		PLS_INTEGER DEFAULT 1				-- (1/0/NULL) Se 1 se la stored è chiamata dalla GUI di una web application per cui gli id. dei soggetti non vengono considerati se non sono popolati anche altri campi visibili a video o se non sono congruenti con i valori dei campi stessi
342        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
343        
344        	/*** Funzione di eliminazione di un attributo									***/
345        	/*** Si può specificare se l'eliminazione deve essere fisica o solo logica (annullamento)		***/
346        	/*** Se non lo si specifica il sistema fa quella fisica se possibile, se no quella logica		***/
347        	function DAttributo(
348        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
349        																	-- (obblig). Codice identificativo del token di connessione
350        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
351        			NomeIn   				IN 		DMT_ATTRIBUTES_DEF.ATTR_NAME%type,		-- (obblig.) Nome identificativo dell'attributo
352        			FlgCancFisicaIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL): Se 1 si richiede la cancellazione fisica; se 0 l'annullamento logico; se non è valorizzato quella possibile delle 2.
353        			MotiviIn				IN		DMT_PROCESS_TYPES.MOTIVI_ANN%type,		-- Motivi della cancellazione/annullamento
354        			FlgIgnoreWarningIn 		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 0 o NULL significa che in presenza di WARNING la stored si comporta come in caso di errore; se 1 gli WARNING vengono ignorati
355        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
356        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
357        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
358        			WarningMsgOut			OUT		VARCHAR2,						-- Messaggio di warning (valorizzato solo se non c'è errore)
359        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
360        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
361        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
362        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine (senza warning), altrimenti 0 (in caso di errore o warning)
363        
364        	/********* funzione per estrarre nomi e label degli attributi dinamici definiti per le entità contenute in una data tabella ed eventualmente di uno specifico tipo   	*****/
365        	/********* degli attributi complessi NON estrae i sotto-attributi se non richiesto esplicitamente tramite FlgInclSottoAttrIn=1											*****/
366        	function GetAttrDinXEntita(
367        			IdDominioAutIn			IN		DMT_SOGGETTI_PROD_AOO.ID_SP_AOO%type,	-- Id. del dominio in cui ci è autenticati e si sta lavorando (se NULL è lo schema)
368        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- (obblig.) Id. dell'utente di lavoro (quello per cui mostrare gli attributi dinamici previsti)
369        			NomeTabellaIn			IN		VARCHAR2,								-- (obblig.) Nome della tabella in cui si trova l'entità di cui trovare dati degli attributi dinamici previsti
370        																					-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
371        																					-- E' ammesso anche il valore DMT_DOCUMENTS+UD che indica che si vogliono gli attributi dinamici previsti per un documento primario e quindi comprensivi di quelli dell'unità documentaria di appartenenza
372        																					-- E' ammesso anche il valore DMT_DOCUMENTS+VER+UD che indica che si vogliono gli attributi dinamici previsti per documento, sue versioni elettroniche e unità documentaria
373        																					-- E' ammesso anche il valore REPOSITORY che indica che si vogliono gli attributi dinamici previsti per documento, sue versioni elettroniche e unità documentaria + quelli previsti per un folder
374        																					-- E' ammesso anche il valore SO che indica che si vogliono gli attributi dinamici previsti per tutte le entità correlate con la struttura organizzativa ovvero: unità operative, utenti, scrivanie virtuali
375        			CITipoEntitaIn			IN		VARCHAR2 DEFAULT NULL,					-- Identificativo del tipo dell'entità (es: tipo di evento, di documento, di folder, di processo) se da questo dipendono gli attributi dinamici possibili
376        																					-- Se NomeTabellaIn = REPOSITORY è l'id. del tipo preceduto da D o F a seconda che sia un ID_DOC_TYPE o ID_FOLDER_TYPE rispettivamente
377        			TipoAttrIn				IN		DMT_ATTRIBUTES_DEF.ATTR_TYPE%type DEFAULT NULL,
378        																					-- Filtro di ricerca che serve a restringere l'estrazione agli attributi di un dato tipo. Valori possibili:
379        																					-- CHECK		= Casella di spunta
380        																					-- DATE		= Data (con o senza ora)
381        																					-- DATETIME		= Data e ora
382        																					-- NUMBER		= Numerico (inclusi importi in Euro)
383        																					-- EURO		= Importo in Euro
384        																					-- TEXT-BOX		= Alfanumerico su una riga
385        																					-- TEXT-AREA	= Alfanumerico su più righe
386        																					-- CKEDITOR		= Editor html
387        																					-- TEXT		= Alfanimerico su una o più righe
388        																					-- COMBO-BOX	= Lista di scelta
389        																					-- RADIO		= Radio group
390        																					-- COMPLEX		= Strutturato, ovvero composto da sotto-attributi
391        																					-- SIMPLE		= Tutti i tipi trenne COMPLEX
392        			FlgInclSottoAttrIn		IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Solo se valorizzato a 1 vengono estratti anche eventuali sotto-attributi degli attributi complessi associati al dato tipo di entità
393        			FlgSoloAttrMultiValIn	IN		PLS_INTEGER DEFAULT NULL,				-- (valori 1/0/NULL) Filtro di ricerca che serve a restringere l'estrazione ai soli attributi multivalore (1) o mono-valore (0)
394        			FlgSoloVisInGUIIn		IN		PLS_INTEGER DEFAULT 1,					-- Se 1 vengono estratti solo gli attributi di cui è definito dove devono essere mostrati nelle web GUI
395        			AttribTabOut			OUT		DMTO_DECODIFICHE,						-- Tabella con nomi e label degli attributi (per i sotto-attributi <label padre> - <label sotto-attributi>)
396        			ErrContextOut			OUT		VARCHAR2,								-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
397        			ErrCodeOut				OUT		PLS_INTEGER,							-- N.ro errore di uscita
398        			ErrMsgOut				OUT 	VARCHAR2								-- Messaggio d'errore
399        			) return PLS_INTEGER;													-- Vale 1 se tutto è andato a buon fine, altrimenti 0
400        
401        	/********* funzione per estrarre nomi e label degli attributi dinamici definiti per una data tabella-entità *****/
402        	/********* non estrae gli attributi complessi, ma solo i loro sotto-attributi						*****/
403        	/********* serve per ottenere gli attributi dinamici su cui mettere filtri di ricerca				*****/
404        	function GetAttrDinXRicerca(
405        			IdDominioAutIn			IN		DMT_SOGGETTI_PROD_AOO.ID_SP_AOO%type,	-- Id. del dominio in cui ci è autenticati e si sta lavorando (se NULL è lo schema)
406        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- (obblig.) Id. dell'utente di lavoro (quello per cui mostrare gli attributi dinamici previsti)
407        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si trova l'entità di cui trovare dati degli attributi dinamici previsti
408        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
409        																	-- E' ammesso anche il valore DMT_DOCUMENTS+UD che indica che si vogliono gli attributi dinamici previsti per un documento primario e quindi comprensivi di quelli dell'unità documentaria di appartenenza
410        																	-- E' ammesso anche il valore DMT_DOCUMENTS+VER+UD che indica che si vogliono gli attributi dinamici previsti per documento, sue versioni elettroniche e unità documentaria
411        																	-- E' ammesso anche il valore REPOSITORY che indica che si vogliono gli attributi dinamici previsti per documento, sue versioni elettroniche e unità documentaria + quelli previsti per un folder
412        																	-- E' ammesso anche il valore SO che indica che si vogliono gli attributi dinamici previsti per tutte le entità correlate con la struttura organizzativa ovvero: unità operative, utenti, scrivanie virtuali
413        			CITipoEntitaIn			IN		VARCHAR2 DEFAULT NULL,				-- Identificativo del tipo dell'entità (es: tipo di evento, di documento, di folder, di processo) se da questo dipendono gli attributi dinamici possibili
414        																	-- Se NomeTabellaIn = REPOSITORY è l'id. del tipo preceduto da D o F a seconda che sia un ID_DOC_TYPE o ID_FOLDER_TYPE rispettivamente
415        			AttribTabOut			OUT		DMTO_DECODIFICHE,					-- Tabella con nomi e label degli attributi (per i sotto-attributi <label padre> - <label sotto-attributi>)
416        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
417        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
418        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
419        			TipoAttrIn				IN		DMT_ATTRIBUTES_DEF.ATTR_TYPE%type DEFAULT NULL,
420        																	-- Filtro di ricerca che serve a restringere l'estrazione agli attributi di un dato tipo. Valori possibili:
421        																	-- CHECK		= Casella di spunta
422        																	-- DATE		= Data (con o senza ora)
423        																	-- DATETIME		= Data e ora
424        																	-- NUMBER		= Numerico (inclusi importi in Euro)
425        																	-- EURO		= Importo in Euro
426        																	-- TEXT-BOX		= Alfanumerico su una riga
427        																	-- TEXT-AREA	= Alfanumerico su più righe
428        																	-- CKEDITOR		= Editor html
429        																	-- TEXT		= Alfanimerico su una o più righe
430        																	-- COMBO-BOX	= Lista di scelta
431        																	-- RADIO		= Radio group
432        																	-- COMPLEX		= Strutturato, ovvero composto da sotto-attributi
433        			FlgSoloAttrMultiValIn		IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Filtro di ricerca che serve a restringere l'estrazione ai soli attributi multivalore (1) o mono-valore (0)
434        			FlgSoloVisInGUIIn		IN		PLS_INTEGER DEFAULT 0			-- Se 1 vengono estratti solo gli attributi di cui è definito dove devono essere mostrati nelle web GUI
435        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
436        
437        	/********* uguale alla funzione GetAttrDinXRicerca salvo che gli attributi sono restituiti come lista xml 	*****/
438        	/********* funzione per estrarre nomi e label degli attributi dinamici definiti per una data tabella-entità *****/
439        	/********* non estrae gli attributi complessi, ma solo i loro sotto-attributi						*****/
440        	/********* serve per ottenere gli attributi dinamici su cui mettere filtri di ricerca				*****/
441        	function GetAttrDinXRicerca_J(
442        			IdDominioAutIn			IN		DMT_SOGGETTI_PROD_AOO.ID_SP_AOO%type,	-- Id. del dominio in cui ci è autenticati e si sta lavorando (se NULL è lo schema)
443        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- (obblig.) Id. dell'utente di lavoro (quello per cui mostrare gli attributi dinamici previsti)
444        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si trova l'entità di cui trovare dati degli attributi dinamici previsti
445        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
446        																	-- E' ammesso anche il valore DMT_DOCUMENTS+UD che indica che si vogliono gli attributi dinamici previsti per un documento primario e quindi comprensivi di quelli dell'unità documentaria di appartenenza
447        																	-- E' ammesso anche il valore DMT_DOCUMENTS+VER+UD che indica che si vogliono gli attributi dinamici previsti per documento, sue versioni elettroniche e unità documentaria
448        																	-- E' ammesso anche il valore REPOSITORY che indica che si vogliono gli attributi dinamici previsti per documento, sue versioni elettroniche e unità documentaria + quelli previsti per un folder
449        																	-- E' ammesso anche il valore SO che indica che si vogliono gli attributi dinamici previsti per tutte le entità correlate con la struttura organizzativa ovvero: unità operative, utenti, scrivanie virtuali
450        			CITipoEntitaIn			IN		VARCHAR2 DEFAULT NULL,				-- Identificativo del tipo dell'entità (es: tipo di evento, di documento, di folder, di processo) se da questo dipendono gli attributi dinamici possibili
451        																	-- Se NomeTabellaIn = REPOSITORY è l'id. del tipo preceduto da D o F a seconda che sia un ID_DOC_TYPE o ID_FOLDER_TYPE rispettivamente
452        			AttribTabOut			OUT		NOCOPY CLOB,			-- Lista XML (schema ListaStd.xsd) con i dati degli attributi (per i sotto-attributi <label padre> - <label sotto-attributo>)
453        																	-- Ogni tag Riga è un attributo che contiene le colonne:
454        																	-- 1) Nome identificativo dell'attributo
455        																	-- 2) Label dell'attributo
456        																	-- 3) Tipo dell'attributo
457        																	-- 4) Flg 1/0 che indica se sull'attributo testo serve prevedere la ricerca full-text (1) o meno (0)
458        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
459        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
460        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
461        			TipoAttrIn				IN		DMT_ATTRIBUTES_DEF.ATTR_TYPE%type DEFAULT NULL,
462        																	-- Filtro di ricerca che serve a restringere l'estrazione agli attributi di un dato tipo. Valori possibili:
463        																	-- CHECK		= Casella di spunta
464        																	-- DATE		= Data (con o senza ora)
465        																	-- DATETIME		= Data e ora
466        																	-- NUMBER		= Numerico (inclusi importi in Euro)
467        																	-- EURO		= Importo in Euro
468        																	-- TEXT-BOX		= Alfanumerico su una riga
469        																	-- TEXT-AREA	= Alfanumerico su più righe
470        																	-- CKEDITOR		= Editor html
471        																	-- TEXT		= Alfanimerico su una o più righe
472        																	-- COMBO-BOX	= Lista di scelta
473        																	-- RADIO		= Radio group
474        																	-- COMPLEX		= Strutturato, ovvero composto da sotto-attributi
475        			FlgSoloAttrMultiValIn		IN		PLS_INTEGER DEFAULT NULL			-- (valori 1/0/NULL) Filtro di ricerca che serve a restringere l'estrazione ai soli attributi multivalore (1) o mono-valore (0)
476        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
477        
478        	/********* funzione per estrarre nomi e label delle sezioni/tab in cui raggruppare gli attributi nella GUI *****/
479        	function GetAttrDinSezTabGUI(
480        			IdDominioAutIn			IN		DMT_SOGGETTI_PROD_AOO.ID_SP_AOO%type,	-- Id. del dominio in cui ci è autenticati e si sta lavorando (se NULL è lo schema)
481        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- (obblig.) Id. dell'utente di lavoro (quello per cui mostrare gli attributi dinamici previsti)
482        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si trova l'entità di cui trovare dati degli attributi dinamici previsti
483        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
484        																	-- E' ammesso anche il valore DMT_DOCUMENTS+UD che indica che si vogliono gli attributi dinamici previsti per un documento primario e quindi comprensivi di quelli dell'unità documentaria di appartenenza
485        																	-- E' ammesso anche il valore DMT_DOCUMENTS+VER+UD che indica che si vogliono gli attributi dinamici previsti per documento, sue versioni elettroniche e unità documentaria
486        																	-- E' ammesso anche il valore REPOSITORY che indica che si vogliono gli attributi dinamici previsti per documento, sue versioni elettroniche e unità documentaria + quelli previsti per un folder
487        																	-- E' ammesso anche il valore SO che indica che si vogliono gli attributi dinamici previsti per tutte le entità correlate con la struttura organizzativa ovvero: unità operative, utenti, scrivanie virtuali
488        			CITipoEntitaIn			IN		VARCHAR2 DEFAULT NULL,			-- Identificativo del tipo dell'entità (es: tipo di evento, di documento, di folder, di processo) se da questo dipendono gli attributi dinamici possibili
489        																			-- Se NomeTabellaIn = REPOSITORY è l'id. del tipo preceduto da D o F a seconda che sia un ID_DOC_TYPE o ID_FOLDER_TYPE rispettivamente
490        			AttribTabOut			OUT		DMTO_DECODIFICHE,				-- Tabella con nomi e label delle sezioni/tab
491        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
492        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
493        			ErrMsgOut				OUT 		VARCHAR2					-- Messaggio d'errore
494        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
495        
496        	/**** funzione per testare se per una nuova entità da inserire in una data tabella vi sono o meno attributi dinamici definibili 					*****/
497        	/**** Va usata solo per le entità in cui la presenza o meno di attributi dinamici non è legata ad attributi non dinamici (come ad es. x documenti, folder)	*****/
498        	function TestPresAttrDinXNuovaEntita(
499        			IdDominioAutIn			IN		DMT_SOGGETTI_PROD_AOO.ID_SP_AOO%type,	-- Id. del dominio in cui ci è autenticati e si sta lavorando (se NULL è lo schema)
500        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- (obblig.) Id. dell'utente di lavoro (quello per cui mostrare gli attributi dinamici previsti)
501        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si inserire l'entità per cui testare se vi sono attributi dinamici definibili
502        			FlgPresenzaAttrDinOut		OUT		PLS_INTEGER,					-- (valori 1/0) Indica se per le nuove entità da inserire nella tabella vi sono (1) o meno (0) attributi dinamici definibili
503        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
504        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
505        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
506        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
507        
508        	/***** Funzione per caricare gli attributi dinamici di una data entità (visibili all'utenza di lavoro)												*****/
509        	/***** che gestisce gli attributi dinamici in una struttura nested table "ALTRI_ATTRIBUTI" (dunque senza storicizzazione degli attributi)							*****/
510        	/***** restituisce sia i dati per rappresentarli nella GUI, sia i loro valori 																*****/
511        	/***** (salvo per gli attributi multivalore, di cui si restituiscono solo le informazioni di presenza)												*****/
512        	/***** nel caso in cui l'entità sia un documento i valori che vengono mostrati sono solo quelli non relativi ad una specifica versione  							*****/
513        	function LoadAttrDinamici(
514        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
515        																	-- (obblig). Codice identificativo del token di connessione
516        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
517        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si trova l'entità di cui caricare i dati degli attributi dinamici
518        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
519        																	-- E' ammesso anche il valore DMT_DOCUMENTS+UD che indica che si vogliono gli attributi dinamici di un documento primario e quindi comprensivi di quelli dell'unità documentaria di appartenenza
520        			RowidIn				IN		VARCHAR2 DEFAULT NULL,				-- Rowid del record di DB che corrisponde all'entità di cui caricare i dati degli attributi dinamici
521        																	-- Se NULL significa che si vuole caricare i dati degli attributi dinamici di un nuovo record della tabella NomeTabellaIn
522        			CITipoEntitaIn			IN		VARCHAR2 DEFAULT NULL,				-- Identificativo del tipo dell'entità (es: tipo di evento, di documento, di folder) se da questo dipendono gli attributi dinamici possibili
523        																	-- Deve essere valorizzato con l'id. del tipo che appare nella GUI, anche se non ancora aggiornato/salvato in DB
524        			ListaTipiRegIn			IN		CLOB DEFAULT NULL,				-- Lista con TUTTI i tipi di registrazione, se l'entità  è un'unità doc. o un documento+ unità doc.(XML conforme a schema LISTA_STD.xsd)
525        																	-- Ogni tag "Riga" contiene 2 colonne:
526        																	-- 1: Codice della categoria del tipo di registrazione (es: PG = Protocollo Generale; PP = Protocollo Particolare, R = Repertorio ecc. Valori codificati in apposita dictionary entry)
527        																	-- 2: Sigla che identifica il tipo di registrazione
528        			AttrValuesXMLIn			IN		CLOB DEFAULT NULL,				-- XML contenente nomi e valori degli attributi dinamici attualmente mostrati nella GUI anche se non ancora salvati in DB (conforme allo schema SezioneCache.xsd)
529        																	-- Serve passarlo laddove gli attributi dinamici possano variare in funzione di attributi dell'entità (il tipo, le registrazioni) affinchè i valori degli attributi dinamici già settati/variati nella GUI e non ancora salvati in DB, se possibile, non vadano persi
530        																	-- Gli attributi già presenti in DB per l'entità e per i quali non c'è corrispondente nell'XML si intendono invariati
531        																	-- Per tutti gli attributi vale quanto segue:
532        																	-- Un attributo è un tag "Variabile" dell'XML il cui tag "Nome" contiene il nome identificativo dell'attributo (ATTR_NAME di DMT_ATTRIBUTES_DEF)
533        																	-- Un attributo è una variabile con tag "ValoreSemplice" se è un attributo a singolo valore e non strutturato (cioè con tipo diverso da COMPLEX)
534        																	-- altrimenti è una variabile con tag "Lista" che ha un'unica colonna con "Nro" pari a 1 se l'attributo non è strutturato, che ha invece tante colonne quanti gli attributi componenti (ordinate in base al loro NRO_ORD_IN_SUP) se l'attributo è complesso
535        																	-- Nel caso di variabili con tag "Lista" i valori specificati nell'XML si aggiungono o sostituiscono quelli già presenti in DB a seconda che nell'XML sia presente o meno una variabile con tag "Nome" pari a #Append_<Nome attributo> e tag "ValoreSemplice" pari a 1
536        																	-- In particolare se non sono specificati valori nell'XML (tag Lista vuoto) e se i valori non sono da aggiungere si intende che tutti i valori dell'attributo già presenti in DB vanno rimossi
537        			AttributiAddOut			OUT		NOCOPY CLOB,					-- Lista degli attributi dinamici visibili all'utente di lavoro e da mostrare nella GUI (XML conforme a schema LISTA_STD.xsd)
538        																	-- Ogni attributo è un tag "Riga" che contiene le seguenti colonne:
539        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare l'attributo
540        																	-- 2: Nome identificativo dell'attributo (ATTR_NAME)
541        																	-- 3: Label del campo con cui rappresentare l'attributo
542        																	-- 4: Tipo di attributo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER (solo gli interi senza separatore delle migliaia e senza segno), EURO, DECIMAL (anche se senza decimali, ricadono in questo tipo gli interi con separatore delle migliaia e/o con segno), LISTA, COMBO-BOX, RADIO, CKEDITOR (editor html)
543        																	-- 5: N.ro massimo di caratteri/cifre
544        																	-- 6: Larghezza del campo con cui rappresentare l'attributo (size)
545        																	-- 7: Valore dell'attributo
546        																	-- 8: Label del riquadro (fieldset) in cui mostrare l'attributo
547        																	-- 9: (valori 1/0) 1 indica che l'attributo è obbligatorio, 0 che è facoltativo
548        																	-- 10: Altezza (in nro righe) del campo con cui rappresentare l'attributo (se TEXT-AREA o CKEDITOR)
549        																	-- 11:(valori 1/0) 1 indica se l'attributo è modificabile, 0 che è in sola visualizzazione
550        																	-- 12: N.ro di cifre decimali (se DECIMAL o EURO)
551        																	-- 13: Codice della lista di lookup associata all'attributo (viene mostrato solo se attributo modificabile in base ACL, anche se non editabile)
552        																	-- 14: Nomi identificativi degli attributi custom (quello corrente ed eventuali altri dello stesso fieldset) da popolare con la lookup e corrispondenti indici delle colonne del clob di popolamento della lista di lookup (nel formato <ATTR_NAME_1>|-|<Indice_1>|-|.....|-|<ATTR_NAME_n>|-|<Indice_n>)
553        																	-- 15: Nomi identificativi degli attributi custom (quello corrente ed eventuali altri dello stesso fieldset) che servono a prefiltrare la lookup e corrispondenti campi di filtro della lookup (così come sono indicati nella jsp) 	(nel formato <ATTR_NAME_1>|-|<Filtro_1>|-|.....|-|<ATTR_NAME_n>|-|<Filtro_n>)
554        																	-- 16: Nro di riga (da 1 in su) in cui posizionare l'attributo nel fieldest di appartenenza (i.e. attributo complesso)
555        																	-- 17: end-point del web-service attraverso cui popolare la lista di possibili valori dell'attributo
556        																	-- 18: xml/input da passare al web-service per popolare la lista di possibili valori dell'attributo
557        																	-- 19:(valori 1/0) Se 1 indica che è un attributo che contiene dati sensibili
558        																	-- 20: valori del radio (se attributo di tipo RADIO)
559        																	-- 21: property che corrisponde all'attributo in un sistema esterno (esempio catasti SIRA)
560        																	-- 22: codice che indica in che tab/sezione della GUI mettere l'attributo
561        																	-- 23: (valori 1/NULL) Indica se nell'attributo - di tipo LISTA - le azioni di creazione e cancellazione record vanno inibite
562        																	-- 24: Label che indica in che tab/sezione della GUI mettere l'attributo
563        																	-- 25: Espressione regolare di controllo del campo
564        																	-- 26: (UPPER/LOWER) Indicazione se campo upper-case o lower-case
565        																	-- 27: Flag 1/0 che indica se il campo è diverso rispetto a quanto settato in altro task di processo in cui i dati vengono verificati
566        			FlgMostraAltriAttrOut		OUT		PLS_INTEGER,					-- (valori 1/0) 1 se c'è almeno un attributo dinamico visibile, 0 altrimenti
567        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
568        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
569        			ErrMsgOut				OUT 		VARCHAR2,					-- Messaggio d'errore
570        			FlgMostraTuttiIn			IN		PLS_INTEGER DEFAULT NULL,	-- (valori 1/0/NULL) Se 1 vengono mostrati tutti gli attributi, anche quelli che non vanno nel tab "Altri dati" delle pagine jsp
571        			FlgNomeAttrConSuffIn		IN		PLS_INTEGER DEFAULT NULL,	-- (valori 1/0/NULL) Viene considerato solo se si estraggono attributi di unità doc./documenti e loro versioni
572        																			-- Se 1 al nome degli attributi viene appeso il suffisso _Doc, _Ud e _Ver per indicare se attributo di documento, unità documentaria o versione
573        			NomeFlussoWFIn			IN		DMT_DETT_ATTIVITA_WF.PROV_CI_TY_FLUSSO_WF%type DEFAULT NULL,
574        																			-- (considerato solo se ActivityNameWFIn è valorizzato) Nome identificativo del flusso workflow cui si riferisce ActivityNameWFIn
575        			ProcessNameWFIn			IN		DMT_DETT_ATTIVITA_WF.PROCESS_NAME%type DEFAULT NULL,
576        																			-- (considerato solo se ActivityNameWFIn è valorizzato) Nome del sotto-processo(=fase) del flusso workflow cui si riferisce ActivityNameWFIn
577        			ActivityNameWFIn		IN		DMT_DETT_ATTIVITA_WF.ACTIVITY_NAME%type DEFAULT NULL,
578        																			-- Internal name del task workflow in cui devono apparire gli attributi
579        																			-- Serve a rendere NON editabili quelli che non devono esserlo in quel task se vi sono restrizioni in tal senso
580        			FlgDatiStoriciTaskIn	IN		PLS_INTEGER DEFAULT NULL		-- Flag 1/0: se 1 indica che gli attributi da mostrare sono quelli storici del task di processo precedenti all'invio del task di verifica dei dati stessi
581        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
582        
583        	/***** Funzione per caricare i dati di una lista che fa parte degli attributi dinamici di una data entità 						*****/
584        	/***** che gestisce gli attributi dinamici in una struttura nested table "ALTRI_ATTRIBUTI" (dunque senza storicizzazione degli attributi)	*****/
585        	/***** restituisce sia i dati per rappresentare la lista nella GUI, sia il contenuto della lista							*****/
586        	/***** nel caso in cui l'entità sia un documento i valori che vengono mostrati sono solo quelli non relativi ad una specifica versione  	*****/
587        	function LoadAttrDinamicoLista(
588        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
589        																	-- (obblig). Codice identificativo del token di connessione
590        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
591        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si trova l'entità di cui caricare i dati della lista che fa parte degli attributi dinamici
592        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
593        																	-- E' ammesso anche il valore DMT_DOCUMENTS+UD che indica che si trattano gli attributi dinamici di un documento primario comprensivi di quelli dell'unità documentaria di appartenenza
594        			RowidIn				IN		VARCHAR2 DEFAULT NULL,				-- Rowid del record di DB che corrisponde all'entità di cui caricare i dati della lista che fa parte degli attributi dinamici
595        																	-- Se NULL significa che si vuole caricare i dati della lista che fa parte degli attributi dinamici di un nuovo record della tabella NomeTabellaIn
596        			NomeAttrListaIn   		IN 		DMT_ATTRIBUTES_DEF.ATTR_NAME%type,		-- (obblig.) Nome identificativo dell'attributo	lista di cui caricare i dati
597        			TitoloListaOut			OUT		VARCHAR2,						-- Titolo della lista
598        			DatiDefListaOut			OUT		NOCOPY CLOB,					-- Lista con le informazioni per rappresentare nella GUI l'attributo lista come tabella (XML conforme a schema LISTA_STD.xsd)
599        																	-- La lista ha tante righe quante le colonne dell'attributo lista, ovvero quanti sono gli attributi che compongono l'attributo lista
600        																	-- Ogni colonna della tabella è un tag "Riga" che contiene le seguenti colonne:
601        																	-- 1: Intestazione della colonna
602        																	-- 2: Nome identificativo dell'attributo che corrisponde alla colonna
603        																	-- 3: Larghezza della colonna (in %)
604        			DatiDettListaOut			OUT		NOCOPY CLOB,		-- Lista con le informazioni per rappresentare nella GUI il dettaglio del singolo record della lista (XML conforme a schema LISTA_STD.xsd)
605        																	-- La lista ha tante righe quante le colonne dell'attributo lista, ovvero quanti sono gli attributi che compongono l'attributo lista
606        																	-- Ogni campo del dettaglio (tanti quante le colonne dell'attributo lista) è un tag "Riga" che contiene le seguenti colonne:
607        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare il campo
608        																	-- 2: Nome identificativo del campo (ATTR_NAME)
609        																	-- 3: Label del campo
610        																	-- 4: Tipo di campo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER (solo gli interi senza separatore delle migliaia e senza segno), EURO, DECIMAL (anche se senza decimali, ricadono in questo tipo gli interi con separatore delle migliaia e/o con segno), LISTA, COMBO-BOX, RADIO, CKEDITOR
611        																	-- 5: N.ro massimo di caratteri/cifre
612        																	-- 6: Larghezza del campo (size)
613        																	-- 7: Valore di default
614        																	-- 8: <NON UTILIZZATA>
615        																	-- 9: (valori 1/0) 1 indica che il campo è obbligatorio, 0 che è facoltativo
616        																	-- 10: Altezza (in nro righe) del campo (se TEXT-AREA o CKEDITOR)
617        																	-- 11:(valori 1/0) 1 indica se il campo è modificabile, 0 che è in sola visualizzazione
618        																	-- 12: N.ro di cifre decimali (se tipo EURO o DECIMAL)
619        																	-- 13: Codice della lista di lookup associata al campo (viene mostrato solo se attributo modificabile in base ACL, anche se non editabile)
620        																	-- 14: Nomi identificativi dei campi (quello corrente ed eventuali altri dello stesso attributo strutturato) da popolare con la lookup e corrispondenti indici delle colonne del clob di popolamento della lista di lookup (nel formato <ATTR_NAME_1>|-|<Indice_1>|-|.....|-|<ATTR_NAME_n>|-|<Indice_n>)
621        																	-- 15: Nomi identificativi dei campi (quello corrente ed eventuali altri dello stesso attributo strutturato) che servono a prefiltrare la lookup e corrispondenti campi di filtro della lookup (così come sono indicati nella jsp di lookup) (nel formato <ATTR_NAME_1>|-|<Filtro_1>|-|.....|-|<ATTR_NAME_n>|-|<Filtro_n>)
622        																	-- 16: Nro di riga (da 1 in su) in cui posizionare l'attributo nel fieldest di appartenenza (i.e. attributo complesso)
623        																	-- 17: end-point del web-service attraverso cui popolare la lista di possibili valori dell'attributo
624        																	-- 18: xml/input da passare al web-service per popolare la lista di possibili valori dell'attributo
625        																	-- 19:(valori 1/0) Se 1 indica che è un attributo che contiene dati sensibili
626        																	-- 20: valori del radio (se attributo di tipo RADIO)
627        																	-- 21: property che corrisponde all'attributo in un sistema esterno (esempio catasti SIRA)
628        																	-- 25: Espressione regolare di controllo del campo
629        																	-- 26: (UPPER/LOWER) Indicazione se campo upper-case o lower-case
630        																	-- 27: non utilizzata
631        			ValoriListaOut			OUT		NOCOPY CLOB,			-- Lista con i valori delle righe dell'attributo lista (XML conforme a schema LISTA_STD.xsd)
632        																	-- Ogni riga dell'attributo lista è un tag "Riga" che contiene una sola colonna se l'attributo lista non è strutturato, altrimenti le colonne corrispondenti le colone con Nro pari a NRO_ORD_IN_SUP degli attributi che corrispondono alle n colonne)
633        			FlgDatiVariatiOut		OUT		NOCOPY CLOB,			-- Lista xml di flag 1/0 che indicano - 1 - se dato variato rispetto al task di confronto; ha tante righe e colonne quanti in ValoriListaOut (XML conforme a schema LISTA_STD.xsd)
634        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
635        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
636        			ErrMsgOut				OUT 		VARCHAR2,					-- Messaggio d'errore
637        			NomeFlussoWFIn			IN		DMT_DETT_ATTIVITA_WF.PROV_CI_TY_FLUSSO_WF%type DEFAULT NULL,
638        																			-- (considerato solo se ActivityNameWFIn è valorizzato) Nome identificativo del flusso workflow cui si riferisce ActivityNameWFIn
639        			ProcessNameWFIn			IN		DMT_DETT_ATTIVITA_WF.PROCESS_NAME%type DEFAULT NULL,
640        																			-- (considerato solo se ActivityNameWFIn è valorizzato) Nome del sotto-processo(=fase) del flusso workflow cui si riferisce ActivityNameWFIn
641        			ActivityNameWFIn		IN		DMT_DETT_ATTIVITA_WF.ACTIVITY_NAME%type DEFAULT NULL,
642        																			-- Internal name del task workflow in cui devono apparire gli attributi
643        																			-- Serve a rendere NON editabili quelli che non devono esserlo in quel task se vi sono restrizioni in tal senso
644        			FlgDatiStoriciTaskIn	IN		PLS_INTEGER DEFAULT NULL		-- flag 1/0: se 1 indica che gli attributi da mostrare sono quelli storici del task di processo precedenti all'invio del task di verifica dei dati stessi
645        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
646        
647            /***** Aggiunta da D'Antonio Domenico  - 03/09/2019         *****/
648            /***** Funzione per caricare i dati di una lista che fa parte degli attributi dinamici di una data entità 						*****/
649        	/***** che gestisce gli attributi dinamici in una struttura nested table "ALTRI_ATTRIBUTI" (dunque senza storicizzazione degli attributi)	*****/
650        	/***** restituisce sia i dati per rappresentare la lista nella GUI, sia il contenuto della lista							*****/
651        	/***** nel caso in cui l'entità sia un documento i valori che vengono mostrati sono solo quelli non relativi ad una specifica versione  	*****/
652            /***** La seguente procedure ottiene in ingresso la lista di nomi di attributi dinamici (separati dal carattere ",") ed effettua per ognuno di essi, la chiamata alla procedura preceddente "LoadAttrDinamicoLista"     *****/
653        	function LoadAttrDinamicoListaMassivo(
654        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
655        																	-- (obblig). Codice identificativo del token di connessione
656        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
657        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si trova l'entità di cui caricare i dati della lista che fa parte degli attributi dinamici
658        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
659        																	-- E' ammesso anche il valore DMT_DOCUMENTS+UD che indica che si trattano gli attributi dinamici di un documento primario comprensivi di quelli dell'unità documentaria di appartenenza
660        			RowidIn				IN		VARCHAR2 DEFAULT NULL,				-- Rowid del record di DB che corrisponde all'entità di cui caricare i dati della lista che fa parte degli attributi dinamici
661        																	-- Se NULL significa che si vuole caricare i dati della lista che fa parte degli attributi dinamici di un nuovo record della tabella NomeTabellaIn
662        			NomeAttrListaIn   		IN 		VARCHAR2,		-- (obblig.) Nome identificativo dell'attributo	lista di cui caricare i dati
663        			TitoloListaOut			OUT		VARCHAR2,						-- Titolo della lista
664        			DatiDefListaOut			OUT		NOCOPY CLOB,					-- Lista con le informazioni per rappresentare nella GUI l'attributo lista come tabella (XML conforme a schema LISTA_STD.xsd)
665        																	-- La lista ha tante righe quante le colonne dell'attributo lista, ovvero quanti sono gli attributi che compongono l'attributo lista
666        																	-- Ogni colonna della tabella è un tag "Riga" che contiene le seguenti colonne:
667        																	-- 1: Intestazione della colonna
668        																	-- 2: Nome identificativo dell'attributo che corrisponde alla colonna
669        																	-- 3: Larghezza della colonna (in %)
670        			DatiDettListaOut			OUT		NOCOPY CLOB,		-- Lista con le informazioni per rappresentare nella GUI il dettaglio del singolo record della lista (XML conforme a schema LISTA_STD.xsd)
671        																	-- La lista ha tante righe quante le colonne dell'attributo lista, ovvero quanti sono gli attributi che compongono l'attributo lista
672        																	-- Ogni campo del dettaglio (tanti quante le colonne dell'attributo lista) è un tag "Riga" che contiene le seguenti colonne:
673        																	-- 1: N.ro (valori da 1 a n) del riquadro (fieldset) in cui mostrare il campo
674        																	-- 2: Nome identificativo del campo (ATTR_NAME)
675        																	-- 3: Label del campo
676        																	-- 4: Tipo di campo. Valori: DATE, DATETIME, TEXT, TEXT-AREA, CHECK, INTEGER (solo gli interi senza separatore delle migliaia e senza segno), EURO, DECIMAL (anche se senza decimali, ricadono in questo tipo gli interi con separatore delle migliaia e/o con segno), LISTA, COMBO-BOX, RADIO, CKEDITOR
677        																	-- 5: N.ro massimo di caratteri/cifre
678        																	-- 6: Larghezza del campo (size)
679        																	-- 7: Valore di default
680        																	-- 8: <NON UTILIZZATA>
681        																	-- 9: (valori 1/0) 1 indica che il campo è obbligatorio, 0 che è facoltativo
682        																	-- 10: Altezza (in nro righe) del campo (se TEXT-AREA o CKEDITOR)
683        																	-- 11:(valori 1/0) 1 indica se il campo è modificabile, 0 che è in sola visualizzazione
684        																	-- 12: N.ro di cifre decimali (se tipo EURO o DECIMAL)
685        																	-- 13: Codice della lista di lookup associata al campo (viene mostrato solo se attributo modificabile in base ACL, anche se non editabile)
686        																	-- 14: Nomi identificativi dei campi (quello corrente ed eventuali altri dello stesso attributo strutturato) da popolare con la lookup e corrispondenti indici delle colonne del clob di popolamento della lista di lookup (nel formato <ATTR_NAME_1>|-|<Indice_1>|-|.....|-|<ATTR_NAME_n>|-|<Indice_n>)
687        																	-- 15: Nomi identificativi dei campi (quello corrente ed eventuali altri dello stesso attributo strutturato) che servono a prefiltrare la lookup e corrispondenti campi di filtro della lookup (così come sono indicati nella jsp di lookup) (nel formato <ATTR_NAME_1>|-|<Filtro_1>|-|.....|-|<ATTR_NAME_n>|-|<Filtro_n>)
688        																	-- 16: Nro di riga (da 1 in su) in cui posizionare l'attributo nel fieldest di appartenenza (i.e. attributo complesso)
689        																	-- 17: end-point del web-service attraverso cui popolare la lista di possibili valori dell'attributo
690        																	-- 18: xml/input da passare al web-service per popolare la lista di possibili valori dell'attributo
691        																	-- 19:(valori 1/0) Se 1 indica che è un attributo che contiene dati sensibili
692        																	-- 20: valori del radio (se attributo di tipo RADIO)
693        																	-- 21: property che corrisponde all'attributo in un sistema esterno (esempio catasti SIRA)
694        																	-- 25: Espressione regolare di controllo del campo
695        																	-- 26: (UPPER/LOWER) Indicazione se campo upper-case o lower-case
696        																	-- 27: non utilizzata
697        			ValoriListaOut			OUT		NOCOPY CLOB,			-- Lista con i valori delle righe dell'attributo lista (XML conforme a schema LISTA_STD.xsd)
698        																	-- Ogni riga dell'attributo lista è un tag "Riga" che contiene una sola colonna se l'attributo lista non è strutturato, altrimenti le colonne corrispondenti le colone con Nro pari a NRO_ORD_IN_SUP degli attributi che corrispondono alle n colonne)
699        			FlgDatiVariatiOut		OUT		NOCOPY CLOB,			-- Lista xml di flag 1/0 che indicano - 1 - se dato variato rispetto al task di confronto; ha tante righe e colonne quanti in ValoriListaOut (XML conforme a schema LISTA_STD.xsd)
700        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
701        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
702        			ErrMsgOut				OUT 		VARCHAR2,					-- Messaggio d'errore
703        			NomeFlussoWFIn			IN		DMT_DETT_ATTIVITA_WF.PROV_CI_TY_FLUSSO_WF%type DEFAULT NULL,
704        																			-- (considerato solo se ActivityNameWFIn è valorizzato) Nome identificativo del flusso workflow cui si riferisce ActivityNameWFIn
705        			ProcessNameWFIn			IN		DMT_DETT_ATTIVITA_WF.PROCESS_NAME%type DEFAULT NULL,
706        																			-- (considerato solo se ActivityNameWFIn è valorizzato) Nome del sotto-processo(=fase) del flusso workflow cui si riferisce ActivityNameWFIn
707        			ActivityNameWFIn		IN		DMT_DETT_ATTIVITA_WF.ACTIVITY_NAME%type DEFAULT NULL,
708        																			-- Internal name del task workflow in cui devono apparire gli attributi
709        																			-- Serve a rendere NON editabili quelli che non devono esserlo in quel task se vi sono restrizioni in tal senso
710        			FlgDatiStoriciTaskIn	IN		PLS_INTEGER DEFAULT NULL		-- flag 1/0: se 1 indica che gli attributi da mostrare sono quelli storici del task di processo precedenti all'invio del task di verifica dei dati stessi
711        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
712        
713        	/***** Funzione per ottenere un frammento XML con i valori degli attributi dinamici di una data entità (visibili all'utenza di lavoro)													*****/
714        	/***** che gestisce gli attributi dinamici in una struttura nested table "ALTRI_ATTRIBUTI" (dunque senza storicizzazione degli attributi)													*****/
715        	/***** Nel caso in cui l'entità sia un documento gli attributi che vengono mostrati sono solo quelli non relativi ad una specifica versione  												*****/
716        	/***** Restituisce solo i nomi degli attributi e i loro valori (attributi valorizzati e non )																				*****/
717        	/***** Ogni attributo è un tag con nome NomeAttrTagIn fatto come un tag "Variabile"	dello schema SezioneCache.xsd																	*****/
718        	/***** Un attributo nomo-valore ha il valore nel tag "ValoreSemplice"; uno lista nel tag "Lista" (le cui righe hanno tante colonne quante i sotto-attributi componenti, ordinati in base al loro NRO_ORD_IN_SUP	*****/
719        	function GetXMLValoriAttrDinamici(
720        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
721        																	-- (obblig). Codice identificativo del token di connessione
722        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
723        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si trova l'entità di cui caricare gli attributi dinamici
724        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
725        																	-- E' ammesso anche il valore DMT_DOCUMENTS+UD che indica che si vogliono gli attributi dinamici di un documento primario e quindi comprensivi di quelli dell'unità documentaria di appartenenza
726        			RowidIn				IN		VARCHAR2,						-- (obblig.) Rowid del record di DB che corrisponde all'entità di cui caricare gli attributi dinamici
727        			NomeAttrTagIn			IN		VARCHAR2 DEFAULT 'AttributoAdd',		-- Nome del tag che rappresenta un attributo nell'XML di output
728        			AttributiAddXMLOut		OUT		NOCOPY CLOB,					-- Lista degli attributi dinamici visibili all'utente di lavoro (frammento XML fatto da una lista di tag NomeAttrTagIn composti come un tag "Variabile" dello schema SezioneCache.xsd)
729        																	-- Ogni attributo è un tag NomeAttrTagIn che contiene:
730        																	-- il tag "Nome" con il nome identificativo dell'attributo (ATTR_NAME)
731        																	-- il tag "ValoreSemplice" con il valore dell'attributo, se mono-valore
732        																	-- il tag "Lista" con la lista dei valori dell'attributo se multi-valore (le righe della lista hanno tante colonne quante i sotto-attributi componenti, ordinati in base al loro NRO_ORD_IN_SUP)
733        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
734        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
735        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
736        			FlgNomeAttrConSuffIn		IN		PLS_INTEGER DEFAULT NULL			-- (valori 1/0/NULL) Viene considerato solo se si estraggono attributi di unità doc./documenti e loro versioni
737        																	-- Se 1 al nome degli attributi viene appeso il suffisso _Doc, _Ud e _Ver per indicare se attributo di documento, unità documentaria o versione
738        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
739        
740        	/********* Funzione per settare il/i valori di uno o più attributi dinamici (sia semplici che strutturati e/o multivalore) di una data entità 				*********/
741        	/********* che gestisce gli attributi dinamici in una struttura nested table "ALTRI_ATTRIBUTI" (dunque senza storicizzazione degli attributi)				*********/
742        	/********* non esegue alcun controllo di abilitazione dell'utenza di lavoro ad aggiornare dati dell'entità										*********/
743        	function SetAttrDinamici(
744        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
745        																	-- (obblig). Codice identificativo del token di connessione
746        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
747        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si trova l'entità di cui settare gli attributi dinamici
748        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
749        			RowidIn				IN		VARCHAR2,						-- (obblig.) Rowid del record di DB che corrisponde all'entità di cui settare gli attributi dinamici
750        			AttrValuesXMLIn			IN		CLOB,							-- XML contenente nomi e valori degli attributi da aggiornare (conforme allo schema SezioneCache.xsd)
751        																	-- Gli attributi già presenti in DB per l'entità e per i quali non c'è corrispondente nell'XML restano invariati
752        																	-- Per tutti gli attributi vale quanto segue:
753        																	-- Un attributo da settare è un tag "Variabile" dell'XML il cui tag "Nome" contiene il nome identificativo dell'attributo (ATTR_NAME di DMT_ATTRIBUTES_DEF)
754        																	-- Un attributo da settare è una variabile con tag "ValoreSemplice" se è un attributo a singolo valore e non strutturato (cioè con tipo diverso da COMPLEX)
755        																	-- altrimenti è una variabile con tag "Lista" che ha un'unica colonna con "Nro" pari a 1 se l'attributo non è strutturato, che ha invece tante colonne quanti gli attributi componenti (ordinate in base al loro NRO_ORD_IN_SUP) se l'attributo è complesso
756        																	-- Nel caso di variabili con tag "Lista" i valori specificati nell'XML si aggiungono o sostituiscono quelli già presenti in DB a seconda che nell'XML sia presente o meno una variabile con tag "Nome" pari a #Append_<Nome attributo> e tag "ValoreSemplice" pari a 1
757        																	-- In particolare se non sono specificati valori nell'XML (tag Lista vuoto) e se i valori non sono da aggiungere significa che tutti i valori dell'attributo già presenti in DB vanno rimossi
758        			FlgIgnoreAttrNonPrevistiIn 	IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che gli in presenza di eventuali attributi in input non previsti questi vengono solo ignorati (non salvati nè aggiornati) senza dare errore, altrimenti la loro presenza dà luogo a errore
759        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
760        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
761        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
762        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
763        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
764        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
765        			FlgIgnoraObbligIn		IN			PLS_INTEGER DEFAULT NULL,		-- Se 1 vengono esclusi i controlli di obbligatorietà
766        			ActivityNameWFIn		IN		DMT_DETT_ATTIVITA_WF.ACTIVITY_NAME%type DEFAULT NULL,
767        																			-- Internal name del task workflow in cui si salvano gli attributi
768        			EsitoActivityWFIn		IN		VARCHAR2 DEFAULT NULL,
769        																			-- Esito del task workflow in cui si salvano gli attributi
770        			FlgNewRecordIn			IN		PLS_INTEGER DEFAULT NULL,		-- valori 1/0/NULL: se 1 indica che il record per cui si settano gli attributi è appena stato creato (quindi non serve cancellare attributi dinamici pre-sistenti)
771        			FlgRecDaCarMassivoIn	IN		PLS_INTEGER DEFAULT NULL		-- valori 1/0/NULL: se 1 indica che il record per cui si settano gli attributi è un record derivante da caricamento massivo (es. migrazione pregresso)
772        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
773        
774          /********* Creata da Domenico D'Antonio - 17/09/2019 *********/
775          /********* Funzione per settare il/i valori di uno o più attributi dinamici (sia semplici che strutturati e/o multivalore) di una data entità 				*********/
776        	/********* che gestisce gli attributi dinamici in una struttura nested table "ALTRI_ATTRIBUTI" (dunque senza storicizzazione degli attributi)				*********/
777        	/********* non esegue alcun controllo di abilitazione dell'utenza di lavoro ad aggiornare dati dell'entità										*********/
778        	function SetAttrDinamiciFast(
779        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
780        																	-- (obblig). Codice identificativo del token di connessione
781        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
782        			NomeTabellaIn			IN		VARCHAR2,						-- (obblig.) Nome della tabella in cui si trova l'entità di cui settare gli attributi dinamici
783        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
784        			RowidIn				IN		VARCHAR2,						-- (obblig.) Rowid del record di DB che corrisponde all'entità di cui settare gli attributi dinamici
785        			AttrValuesXMLIn			IN		CLOB,							-- XML contenente nomi e valori degli attributi da aggiornare (conforme allo schema SezioneCache.xsd)
786        																	-- Gli attributi già presenti in DB per l'entità e per i quali non c'è corrispondente nell'XML restano invariati
787        																	-- Per tutti gli attributi vale quanto segue:
788        																	-- Un attributo da settare è un tag "Variabile" dell'XML il cui tag "Nome" contiene il nome identificativo dell'attributo (ATTR_NAME di DMT_ATTRIBUTES_DEF)
789        																	-- Un attributo da settare è una variabile con tag "ValoreSemplice" se è un attributo a singolo valore e non strutturato (cioè con tipo diverso da COMPLEX)
790        																	-- altrimenti è una variabile con tag "Lista" che ha un'unica colonna con "Nro" pari a 1 se l'attributo non è strutturato, che ha invece tante colonne quanti gli attributi componenti (ordinate in base al loro NRO_ORD_IN_SUP) se l'attributo è complesso
791        																	-- Nel caso di variabili con tag "Lista" i valori specificati nell'XML si aggiungono o sostituiscono quelli già presenti in DB a seconda che nell'XML sia presente o meno una variabile con tag "Nome" pari a #Append_<Nome attributo> e tag "ValoreSemplice" pari a 1
792        																	-- In particolare se non sono specificati valori nell'XML (tag Lista vuoto) e se i valori non sono da aggiungere significa che tutti i valori dell'attributo già presenti in DB vanno rimossi
793        			FlgIgnoreAttrNonPrevistiIn 	IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che gli in presenza di eventuali attributi in input non previsti questi vengono solo ignorati (non salvati nè aggiornati) senza dare errore, altrimenti la loro presenza dà luogo a errore
794        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
795        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
796        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
797        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
798        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
799        			ErrMsgOut				OUT 		VARCHAR2,						-- Messaggio d'errore
800        			FlgIgnoraObbligIn		IN			PLS_INTEGER DEFAULT NULL,		-- Se 1 vengono esclusi i controlli di obbligatorietà
801        			ActivityNameWFIn		IN		DMT_DETT_ATTIVITA_WF.ACTIVITY_NAME%type DEFAULT NULL,
802        																			-- Internal name del task workflow in cui si salvano gli attributi
803        			EsitoActivityWFIn		IN		VARCHAR2 DEFAULT NULL,
804        																			-- Esito del task workflow in cui si salvano gli attributi
805        			FlgNewRecordIn			IN		PLS_INTEGER DEFAULT NULL,		-- valori 1/0/NULL: se 1 indica che il record per cui si settano gli attributi è appena stato creato (quindi non serve cancellare attributi dinamici pre-sistenti)
806        			FlgRecDaCarMassivoIn	IN		PLS_INTEGER DEFAULT NULL		-- valori 1/0/NULL: se 1 indica che il record per cui si settano gli attributi è un record derivante da caricamento massivo (es. migrazione pregresso)
807        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
808        
809        	/********* Funzione per listare gli attributi dinamici delle entità contenute in una data tabella **********/
810        	function TrovaAttrDinamiciEntita(
811        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
812        																	-- (obblig). Codice identificativo del token di connessione
813        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
814        			FlgPreimpostaFiltroIn		IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1 i filtri e l'ordinamento vengono settati secondo le impostazioni dell'utente di lavoro, altrimenti restano come passati in input
815        			--------------- inizio filtri di ricerca-------------------
816        			NomeTabellaConEntitaIO		IN OUT	VARCHAR2,						-- (obblig.) Nome della tabella in cui si trovano le entità di cui trovare gli attributi dinamici
817        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
818        			FlgSoloVldIO 			IN OUT 	INTEGER, 						-- (valori 1/0/NULL) 1° filtro di ricerca: Se 1 indica se si devono estrarre solo gli attributi legati alle entità della tabella alla data odierna
819        			TsVldIO				IN OUT	VARCHAR2,						-- 2° filtro di ricerca: Stinga con il timestamp (nel formato GG/MM/AAAA HH24:MI:SS) a cui gli attributi devono essere legati alle entità della tabella
820        			------------- inizio argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
821        			ColOrderByIO			IN OUT	VARCHAR2,						-- Indica il/i numeri della/e colonna dell'XML (CLOB ListaXMLOut) di output per cui ordinare i record nell'XML stesso (si può ordinare per le colonne da 1 a 7 e per la 9). Se l'ordinamento è per più colonne queste vanno separate con "," (es: 2; 2,3)
822        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul tipo di ordinamento una qualche preimpostazione di sistema/utente ecc.
823        																	-- se non valorizzato (neppure in output) la lista di record restituita non è ordinata
824        			FlgDescOrderByIO  		IN OUT	VARCHAR2,						-- E' una stringa di 1 o 0/NULL, tanti quanti le colonne di ordinamento, separati da ",": 1 significa che l'ordinamento per la data colonna deve essere discendente anzichè ascendente (es: 1; 1,0; 1, )
825        																	-- in output può essere diverso che in input solo se in input è NULL: in tal caso significa che esiste sul verso di ordinamento una qualche preimpostazione di sistema/utente ecc.
826        			FlgSenzaPaginazioneIn 		IN 		PLS_INTEGER DEFAULT NULL,            	-- (valori 1/0/NULL) Se 1 l'estrazione non è paginata, altrimenti sì
827        			NroPaginaIO      			IN OUT	PLS_INTEGER,                  		-- E' il numero della pagina da estrarre; se NULL e l'estrazione è paginata viene estratta la prima pagina
828           			BachSizeIO				IN OUT	PLS_INTEGER,					-- Indica il massimo n.ro di record da estrarre se l'estrazione non è paginata (FlgSenzaPaginazioneIn=1)
829        																	-- Indica la dimensione (n.ro di record) della pagina se l'estrazione è paginata (FlgSenzaPaginazioneIn 0 o NULL) e in tal caso se non è valorizzato la dimensione della pagina è quella settata per l'utente di lavoro o è pari al valore del parametro STD_PAGE_NUM_ROW del dominio di lavoro
830        			OverFlowLimitIn			IN		PLS_INTEGER DEFAULT NULL,			-- E' il n.ro di record soddisfacenti la ricerca superato il quale la funzione deve restituire errore di overflow
831        			FlgSenzaTotIn			IN		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 significa che non è richiesto come output il totale dei record soddisfacenti la ricerca (se la ricerca è paginata per la prima pagina il totale viene calcolato comunque, per le successive no)
832        			NroTotRecOut			OUT		PLS_INTEGER,					-- E' il n.ro di record complessivi trovati (valorizzato solo se FlgSenzaTotIn è 0 o NULL o se si estrae la prima pagina)
833             			NroRecInPaginaOut 		OUT   	PLS_INTEGER,                     		-- E' il numero di record nella pagina (valorizzato solo se l'estrazione è paginata, ovvero se FlgSenzaPaginazioneIn 0 o NULL)
834        			------------- fine argomenti standard di tutte le funzioni di ricerca che devono restituire una lista --------------
835        			ListaXMLOut				OUT		NOCOPY CLOB,					-- Lista con le relazioni delle entità contenute nella tabella NomeTabellaIn con gli attributi dinamici (XML conforme a schema LISTA_STD.xsd)
836        																	-- Ogni relazione è tag "Riga" che contiene le seguenti colonne:
837        																	-- 1: Identificativo (ROWID) con cui la relazione è già stata registrata in banca dati
838        																	-- 2: Nome identificativo dell'attributo (internal name)
839        																	-- 3: Label con cui viene mostrato l'attributo nella GUI
840        																	-- 4: (valori 1/0) Indicatore di obbligatorietà dell'attributo per le entità della tabella
841        																	-- 5: Massimo numero di valori possibili per l'attributo sulle entità della tabella
842        																	-- 6: Data di inizio validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità decorre da sempre.
843        																	-- 7: Data di fine validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità è illimitata.
844        																	-- 8: (valori 1/0) Se 1 indica che la relazione è attualmente valida
845        																	-- 9: N.ro d'ordine dell'attributo tra quelli associati all'entità
846        			FlgAbilInsOut	 		OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a creazione di nuove relazioni attributo-tabella
847        			FlgAbilUpdOut 			OUT 		PLS_INTEGER ,            			-- (valori 1/0) Se 1 si ha abilitazione a modifica di relazioni attributo-tabella
848        			FlgAbilDelOut 			OUT 		PLS_INTEGER,            			-- (valori 1/0) Se 1 si ha abilitazione a cancellazione di relazioni attributo-tabella
849        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
850        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
851        			ErrMsgOut				OUT 		VARCHAR2)						-- Messaggio d'errore
852        			return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon fine, altrimenti 0
853        
854        	/****** Funzione per settare/resettare la table di tipo DMTO_ATTR_DEF, che contiene i dati degli attributi dinamici associati ad un dato oggetto (tipo/entità) ******/
855        	/****** ATTENZIONE: non controlla le abilitazioni dell'utente																	******/
856        	function SetDefAttrDinamici(
857        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
858        																	-- (obblig). Codice identificativo del token di connessione
859        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
860        			FlgTipoTargetIn			IN		VARCHAR2,						-- (obblig.) Indica il tipo del target per cui settare/resettare gli attributi dinamici associati. Valori poosibili:
861        																	-- E 	= Entità
862        																	-- TD = Tipo di documento
863        																	-- TF	= Tipo di folder
864        																	-- TE	= Tipo di evento di processo
865        																	-- TR	= Tipo di registrazione
866        																	-- TM = Tipi di mezzi pubblicitari (per ICP)
867        																	-- TEA = Tipi di elenchi/albi
868        																	-- TOP = Tipologie degli oggetti di dominio trattati nei procedimenti
869        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
870        			CITargetIn				IN		VARCHAR2,						-- (obblig.) Identificativo del target per cui settare/resettare gli attributi dinamuci associati
871        																	-- Se FlgTipoTargetIn = 'E' è il nome della tabella che contiene le entità
872        																	-- altrimenti è l'id. del tipo di documento/folder/evento di processo/registrazione/mezzo
873        			FlgModSetIn				IN		VARCHAR2 DEFAULT 'I',				-- (valori I/C) Indica se le definizioni di attributi dinamici associati indicati nell'argomento successivo sono forniti in modo incrementale (=I) (solo quelli da inserire/modificare/cancellare) oppure completo (=C),
874        																	-- vale a dire se devono solo aggiornare o piuttosto soppiantare le definizioni indicate come input DefAttrTabIO
875        			XMLDefAttrDinamiciIn		IN		CLOB DEFAULT NULL,				-- Lista con i dati per l'aggiornamento (XML conforme a schema LISTA_STD.xsd)
876        																	-- Ogni relazione con attributo è tag "Riga" che può contenere le seguenti colonne:
877        																	-- 1: Identificativo (ROWID) con cui la relazione è già stata registrata in banca dati
878        																	-- 2: Nome identificativo dell'attributo (internal name)
879        																	-- 3: Label con cui viene mostrato l'attributo nella GUI
880        																	-- 4: (valori 1/0) Indicatore di obbligatorietà dell'attributo
881        																	-- 5: Massimo numero di valori possibili per l'attributo
882        																	-- 6: Data di inizio validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità decorre da sempre.
883        																	-- 7: Data di fine validità della relazione (nel formato dato dal parametro di conf. FMT_STD_DATA). Se non specificata la validità è illimitata.
884        																	-- 8: N.ro (valori da 1 a n) che indica la posizione dell'attributo tra tutti quelli associati
885        																	-- 9: (valori 1/0/NULL) Flag di relazione da eliminare
886        																	-- 10: (flag 1/0) Indica se l'attributo va nel primo TAB della GUI
887        																	-- 11: Codice del TAB in cui mostrare l'attributo
888        																	-- 12: Label del TAB in cui mostrare l'attributo
889        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
890        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
891        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
892        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
893        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
894        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
895        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
896        
897        	/********* funzione per creare o modificare un'associazione di attributo dinamico con le entità contenute in una data tabella **********/
898        	function IUAttrDinamicoEntita(
899        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
900        																	-- (obblig). Codice identificativo del token di connessione
901        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
902        			NomeTabellaConEntitaIO		IN OUT	VARCHAR2,						-- (obblig. se RowidIO è NULL) Nome della tabella in cui si trovano le entità per cui creare/modificare un associazione con un attributo dinamico
903        																	-- E' ammesso anche il valore DMT_DOCUMENTS.VERSIONI che indica che l'entità è una versione di documento
904        			RowidIO				IN OUT	VARCHAR2,						-- Rowid del record-associazione da modificare. Se non valorizzato l'associazione è da inserire ex-novo
905        																	-- In output, salvo in caso di errore, è sempre valorizzato
906        			NomeIn				IN 		DMT_ATTRIBUTES_DEF.ATTR_NAME%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
907        																	-- Nome identificativo dell'attributo da associare. Obbligatorio se l'argomento successivo non è valorizzato.
908        			LabelIn				IN		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'STR_VAL_NO_UPD'),
909        																	-- Label con cui l'attributo da associare appare nella GUI. Obbligatorio se l'argomento precedente non è valorizzato
910        			NroPosizioneIn			IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
911        																	-- N.ro (valori da 1 a n) che indica la posizione che deve avere l'attributo tra tutti quelli associati alle entità del dato tipo
912        																	-- Se NULL e l'associazione è da creare il n.ro posizione viene settato pari al max. n.ro degli attributi associati + 1
913        			FlgObbligIn				IN		PLS_INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
914        																	-- (valori 1/0/NUL) 1 indica che è un attributo obbligatorio per le entità del dato tipo
915        			MaxNumValuesIn			IN		INTEGER DEFAULT dmpk_utility.GetValConfigParamNumber(1, NULL, 'NUM_VAL_NO_UPD'),
916        																	-- Massimo numero di valori possibili per l'attributo
917        			DtInizioVldIn			IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
918        																	-- Data di inizio validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA).
919        			DtFineVldIn				IN		VARCHAR2 DEFAULT dmpk_utility.GetValConfigParamText(1, NULL, 'DATE_VAL_NO_UPD'),
920        																	-- Data di fine validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA).
921        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
922        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
923        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
924        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
925        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
926        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
927        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
928        
929        	/********* funzione per mostrare i dati di un'associazione di attributo dinamico con le entità contenute in una data tabella **********/
930        	function LoadDettAttrDinamicoEntita(
931        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
932        																	-- (obblig). Codice identificativo del token di connessione
933        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
934        			RowidIO				IN OUT	VARCHAR2,						-- (obblig.) Rowid del record-associazione di cui ricavare i dati
935        			NomeTabellaConEntitaOut		OUT		VARCHAR2,						-- Nome della tabella in cui si trovano le entità cui è relativa l'associazione ad attributo dinamico di cui ricavare i dati
936        																	-- Può assumere anche il valore DMT_DOCUMENTS.VERSIONI che indica le versioni di documento
937        			NomeOut				OUT		DMT_ATTRIBUTES_DEF.ATTR_NAME%type,		-- Nome identificativo dell'attributo associato.
938        			LabelOut				OUT		DMT_ATTRIBUTES_DEF.ATTR_LABEL%type,		-- Label con cui l'attributo associato appare nella GUI.
939        			NroPosizioneOut			OUT		PLS_INTEGER,					-- N.ro (valori da 1 a n) che indica la posizione dell'attributo tra tutti quelli associati alle entità del dato tipo
940        			FlgObbligOut			OUT		PLS_INTEGER,					-- (valori 1/0) 1 indica che è un attributo obbligatorio per le entità del dato tipo
941        			MaxNumValuesOut			OUT		INTEGER,						-- Massimo numero di valori possibili per l'attributo
942        			DtInizioVldOut			OUT		VARCHAR2,						-- Data di inizio validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA).
943        			DtFineVldOut			OUT		VARCHAR2,						-- Data di fine validità dell'associazione (nel formato dato dal parametro di conf. FMT_STD_DATA).
944        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
945        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
946        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
947        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
948        
949        	/********* funzione per rimuovere un'associazione di attributo dinamico con le entità contenute in una data tabella **********/
950        	function DAttrDinamicoEntita(
951        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
952        																	-- (obblig). Codice identificativo del token di connessione
953        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
954        			RowidIn				IN		VARCHAR2,						-- (obblig.) Rowid del record-associazione da cancellare
955        			FlgRollBckFullIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se 1 in caso di errore viene fatta la rollback completa (non a savepoint), altrimenti la rollback delle sole modifiche effettuate nella stored
956        																	-- ATTENZIONE: La rollback, di qualsiasi tipo, non riguarda la scrittura di eventuali log
957        			FlgAutoCommitIn			IN 		PLS_INTEGER DEFAULT NULL,			-- (valori 1/0/NULL) Se vale 1, dopo la rollback e qualunque sia l'esito (positivo o meno), la funzione esegue una commit finale
958        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
959        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
960        			ErrMsgOut				OUT 		VARCHAR2						-- Messaggio d'errore
961        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
962        
963        	/************* funzione per ottenere, da una lista di crriteri su attributi dinamici, la where condition da appendere ad una query dinamica perchè includa i criteri specificati *****/
964        	function ComponiCriteriSuAttrDin(
965        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
966        																	-- (obblig). Codice identificativo del token di connessione
967        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
968        			AliasTabellaIn			IN		VARCHAR2,						-- Alias con cui la tabella master con la colonna ALTRI_ATTRIBUTi è identificata nella query principale
969        			PKTabellaIn				IN		VARCHAR2,						-- Campo o concatenazione dei campi (prefissati dall'alias) che fanno da PK per la tabella master con la colonna ALTRI_ATTRIBUTI
970        			CriteriSuAttrDinIn		IN		DMTO_MATRICE_VALORI,				-- Criteri di ricerca sugli attributi addizionali (table di DMVA_STRING). Se più di uno vengono applicati in AND.
971        																	-- Ogni criterio è una riga che può contenere le seguenti colonne:
972        																	--	1) Nome (ATTR_NAME) dell'attributo cui è relativo il criterio
973        																	--	2) (obblig.) Operatore logico. Valori possibili:
974        																	--		"uguale" (ricerca esatta)
975        																	--		"simile a (case-sensitive)" (ricerca case-sensitive in like)
976        																	--		"simile a (case-insensitive)" (ricerca case-insensitive in like e che ignora i caratteri quali spazi, ., ecc)
977        																	--		"maggiore" (se attributo numerico o data)
978        																	--		"maggiore o uguale" (se attributo numerico o data)
979        																	--		"minore" (se attributo numerico o data)
980        																	--		"minore o uguale" (se attributo numerico o data)
981        																	--		"tra" (se attributo numerico o data)
982        																	--		"non valorizzato"
983        																	--		"valorizzato"
984        																	--		"spuntato" (se attributo di tipo casella di spunta)
985        																	--		"non spuntato" (se attributo di tipo casella di spunta)
986        																	--	3) 1° valore di confronto (obblig. e gestito solo se l'operatore non ha uno dei seguenti valori: valorizzato, non valorizzato, spuntato, non spuntato) (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
987        																	--	4) 2° valore di confronto (obblig. e gestito solo se l'operatore è "tra") (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
988        																	--	5) Label dell''attributo cui è relativo il criterio (se sotto-attributo di complesso <label del complesso> - <label del sotto-attributo>)
989        																	--	6) Flag 1/0/NULL: se 1 indica che la condizione non si deve verificare, altrimenti è una condizione che si deve verificare
990        																	--		il campo viene ignorato se l'operatore vale "non valorizzato", "valorizzato", "spuntato", "non spuntato"
991        			WhereConditionToAddOut		OUT		VARCHAR2,					-- Stringa con la condizione da aggiungere (preceduta da AND) alla query affinchè vi siano i criteri sugli attributi dinamici
992        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
993        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
994        			ErrMsgOut				OUT 	VARCHAR2,						-- Messaggio d'errore
995        			NomeTabellaIn			IN		VARCHAR2 DEFAULT NULL,			-- Nome esteso della tabella master con la colonna ALTRI_ATTRIBUTI. Va valorizzata per tabelle con molti record al fine di rendere + efficiente
996        			TabConIndexReverseIn	IN		PLS_INTEGER	DEFAULT NULL,		-- Se 1 indica che è una tabella con indice sulla funzione di rivesciamento della stringa
997        			TabConIndexCtxSysIn		IN		PLS_INTEGER	DEFAULT NULL		-- Se 1 indica che è una tabella con indice context sugli attributi stringa
998        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
999        
1000        	-----overload della precedente, solo che i criteri sugli attributi addizionali sono passati come XML anzichè come DMTO_MATRICE_VALORI
1001        	function ComponiCriteriSuAttrDin(
1002        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1003        																	-- (obblig). Codice identificativo del token di connessione
1004        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1005        			AliasTabellaIn			IN		VARCHAR2,						-- Alias con cui la tabella master con la colonna ALTRI_ATTRIBUTi è identificata nella query principale
1006        			PKTabellaIn				IN		VARCHAR2,						-- Campo o concatenazione dei campi (prefissati dall'alias) che fanno da PK per la tabella master con la colonna ALTRI_ATTRIBUTI
1007        			CriteriSuAttrDinIn		IN		CLOB,							-- Criteri di ricerca sugli attributi addizionali (come XML conforme a schme LISTA_STD.xsd). Se più di uno vengono applicati in AND.
1008        																	-- Ogni criterio è un tag "Riga" che può contenere le seguenti colonne:
1009        																	--	1) Nome (ATTR_NAME) dell'attributo cui è relativo il criterio
1010        																	--	2) (obblig.) Operatore logico. Valori possibili:
1011        																	--		"uguale" (ricerca esatta)
1012        																	--		"simile a (case-sensitive)" (ricerca case-sensitive in like)
1013        																	--		"simile a (case-insensitive)" (ricerca case-insensitive in like e che ignora i caratteri quali spazi, ., ecc)
1014        																	--		"maggiore" (se attributo numerico o data)
1015        																	--		"maggiore o uguale" (se attributo numerico o data)
1016        																	--		"minore" (se attributo numerico o data)
1017        																	--		"minore o uguale" (se attributo numerico o data)
1018        																	--		"tra" (se attributo numerico o data)
1019        																	--		"non valorizzato"
1020        																	--		"valorizzato"
1021        																	--		"spuntato" (se attributo di tipo casella di spunta)
1022        																	--		"non spuntato" (se attributo di tipo casella di spunta)
1023        																	--	3) 1° valore di confronto (obblig. e gestito solo se l'operatore non ha uno dei seguenti valori: valorizzato, non valorizzato, spuntato, non spuntato) (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
1024        																	--	4) 2° valore di confronto (obblig. e gestito solo se l'operatore è "tra") (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
1025        																	--	5) Label dell''attributo cui è relativo il criterio (se sotto-attributo di complesso <label del complesso> - <label del sotto-attributo>)
1026        																	--	6) Flag 1/0/NULL: se 1 indica che la condizione non si deve verificare, altrimenti è una condizione che di deve verificare
1027        			WhereConditionToAddOut		OUT		VARCHAR2,					-- Stringa con la condizione da aggiungere (preceduta da AND) alla query affinchè vi siano i criteri sugli attributi dinamici
1028        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1029        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1030        			ErrMsgOut				OUT 		VARCHAR2,					-- Messaggio d'errore
1031        			NomeTabellaIn			IN		VARCHAR2 DEFAULT NULL,			-- Nome esteso della tabella master con la colonna ALTRI_ATTRIBUTI. Va valorizzata per tabelle con molti record al fine di rendere + efficiente
1032        			TabConIndexReverseIn	IN		PLS_INTEGER	DEFAULT NULL,		-- Se 1 indica che è una tabella con indice sulla funzione di rivesciamento della stringa
1033        			TabConIndexCtxSysIn		IN		PLS_INTEGER	DEFAULT NULL		-- Se 1 indica che è una tabella con indice context sugli attributi stringa
1034        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
1035        
1036        	-----funzione per ottenere la From Clause aggiuntiva quando ci sono filtri su attributi addizionali passati in input in xml CriteriSuAttrDinIn
1037        	function GetFromClauseSuAttrDin(
1038        			CodIdConnectionTokenIn		IN	    	DMT_CONNECTION_TOKEN.CI_CONNECTION_TOKEN%TYPE,
1039        																	-- (obblig). Codice identificativo del token di connessione
1040        			IdUserLavoroIn			IN		DMT_USERS.ID_USER%type DEFAULT NULL,	-- Id. dell'utente a nome di cui si lavora. Se non valorizzato è l'utente connesso
1041        			AliasTabellaIn			IN		VARCHAR2,						-- Alias con cui la tabella master con la colonna ALTRI_ATTRIBUTi è identificata nella query principale
1042        			PKTabellaIn				IN		VARCHAR2,						-- Campo o concatenazione dei campi (prefissati dall'alias) che fanno da PK per la tabella master con la colonna ALTRI_ATTRIBUTI
1043        			CriteriSuAttrDinIn		IN		CLOB,							-- Criteri di ricerca sugli attributi addizionali (come XML conforme a schme LISTA_STD.xsd). Se più di uno vengono applicati in AND.
1044        																	-- Ogni criterio è un tag "Riga" che può contenere le seguenti colonne:
1045        																	--	1) Nome (ATTR_NAME) dell'attributo cui è relativo il criterio
1046        																	--	2) (obblig.) Operatore logico. Valori possibili:
1047        																	--		"uguale" (ricerca esatta)
1048        																	--		"simile a (case-sensitive)" (ricerca case-sensitive in like)
1049        																	--		"simile a (case-insensitive)" (ricerca case-insensitive in like e che ignora i caratteri quali spazi, ., ecc)
1050        																	--		"maggiore" (se attributo numerico o data)
1051        																	--		"maggiore o uguale" (se attributo numerico o data)
1052        																	--		"minore" (se attributo numerico o data)
1053        																	--		"minore o uguale" (se attributo numerico o data)
1054        																	--		"tra" (se attributo numerico o data)
1055        																	--		"non valorizzato"
1056        																	--		"valorizzato"
1057        																	--		"spuntato" (se attributo di tipo casella di spunta)
1058        																	--		"non spuntato" (se attributo di tipo casella di spunta)
1059        																	--	3) 1° valore di confronto (obblig. e gestito solo se l'operatore non ha uno dei seguenti valori: valorizzato, non valorizzato, spuntato, non spuntato) (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
1060        																	--	4) 2° valore di confronto (obblig. e gestito solo se l'operatore è "tra") (se l'attributo è numerico deve avere la virgola come separatore dei decimali, se è di tipo data deve essere in uno dei formato dati dai parametri di conf. FMT_STD_DATA e FMT_STD_TIMESTAMP)
1061        																	--	5) Label dell''attributo cui è relativo il criterio (se sotto-attributo di complesso <label del complesso> - <label del sotto-attributo>)
1062        																	--	6) Flag 1/0/NULL: se 1 indica che la condizione non si deve verificare, altrimenti è una condizione che di deve verificare
1063        			FromClauseToAddOut		OUT		VARCHAR2,					-- Stringa con il pezzo - senza FROM iniziale - da aggiungere alla from clause della query affinchè vi siano i criteri sugli attributi dinamici
1064        			ErrContextOut			OUT		VARCHAR2,						-- Contesto (ovvero package e/o funzione/procedura) in cui si è verificato l'errore
1065        			ErrCodeOut				OUT		PLS_INTEGER,					-- N.ro errore di uscita
1066        			ErrMsgOut				OUT 		VARCHAR2,					-- Messaggio d'errore
1067        			NomeTabellaIn			IN		VARCHAR2 DEFAULT NULL			-- Nome esteso della tabella master con la colonna ALTRI_ATTRIBUTI. Va valorizzata per tabelle con molti record al fine di rendere + efficiente
1068        			) return PLS_INTEGER;											-- Vale 1 se tutto è andato a buon, altrimenti 0 (in caso di errore)
1069        
1070        END DMPK_ATTRIBUTI_DINAMICI;